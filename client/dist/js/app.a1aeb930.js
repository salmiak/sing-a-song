(function(t){function e(e){for(var r,i,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(r=!1)}r&&(s.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},o={app:0},s=[];function i(t){return n.p+"js/"+({about:"about"}[t]||t)+"."+{about:"0be8ec6f"}[t]+".js"}function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,r){a=o[t]=[e,r]}));e.push(a[2]=r);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.src=i(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=o[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",c.name="ChunkLoadError",c.type=r,c.request=s,a[1](c)}o[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},"2a37":function(t,e,a){"use strict";a("5ccf")},"2b63":function(t,e,a){"use strict";a("6102")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),o=a("28dd"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{app:""}},[a("app-bar"),a("v-main",[a("router-view")],1)],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:"",color:"primary",dark:"","inverted-scroll":t.isHidden,"scroll-threshold":"0"}},[a("v-btn",{attrs:{to:"/",icon:""}},[a("svg",{staticClass:"appbar-logo",attrs:{version:"1.1",id:"Lager_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512"}},[a("g",[a("path",{staticClass:"st0",attrs:{d:"M268.4,403.8c-31.5,1.9-62.4-2.7-93.2-8.9c-6.4-1.3-11-0.1-16.1,3.7c-22.8,16.7-44.9,34.1-65,54.1 c-2.6,2.6-5.6,5.3-8.8,6.9c-7.6,3.7-14.3-0.7-14.5-9.1c-0.1-6.3,0.9-12.8,3.9-18.1c11-19.2,10.5-39.8,8.4-60.6 c-0.7-7.4-4.8-12-11.8-16.1c-19.7-11.2-38.4-24.1-51.7-43.1c-4.7-6.7-7.6-15-9.8-22.3c-4.1-13.3-8.2-26.9-9.5-41.2 c-1.5-16.7,1.6-32.2,5.5-48.1c6-24.2,21.1-42.3,38-59.3c5.8-5.9,11.5-12.1,17.2-18c7.9-8.2,17.4-15.1,26.8-21.7 c10.4-7.3,21.3-13.9,32.4-20.2c22.9-13,47.7-20.5,73.6-25.3c48.9-9.1,97.2-6.6,145.1,5.4c27.6,6.9,54.3,16.6,79.9,29.2 c29.1,14.3,50.5,36.1,65.9,64.2c8.2,15,15.5,30.3,22,46.1c1.6,3.8,2.5,8,3.1,12.1c5.1,32.2,0.7,63.7-12,93.2 c-14.7,34.1-42,55.3-76.1,69.6c-38.1,16.1-77.9,22.8-118.4,27.3C291.9,404.9,280.1,403.8,268.4,403.8z M298.8,199.6 c0-22.5,0.3-45-0.1-67.5c-0.2-10.2-4-12.7-14.6-12.3c-9,0.3-10.2,1.9-10.4,12.8c0,3.7,0,7.5,0.1,11.2c1.5,35.8-0.9,71.6-0.9,107.5 c0,9.2-0.6,9.7-9,7.3c-18.6-5.2-35.6-1.8-50.9,9.5c-20.5,15-18.6,30.5-2.1,45.3c1.8,1.6,4.1,2.8,6.3,4.1 c16.3,9.6,33.4,8.5,50.8,4.2c18.3-4.5,26.1-19.4,30.3-35c3.4-12.6,4.1-26.4,2.9-39.7C299.8,231.2,300.6,215.4,298.8,199.6z"}})])])]),a("v-toolbar-title",[a("router-link",{staticClass:"secondary--text text-decoration-none",attrs:{to:"/"}},[t._v("Sing a song")])],1),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-magnify")])],1),a("top-navigation")],1)},l=[],c=(a("c975"),a("b0c0"),{name:"AppBar",data:function(){return{hiddenOn:["Home","Profile"]}},created:function(){console.log(this.$vuetify.breakpoint)},computed:{isHidden:function(){return-1!==this.hiddenOn.indexOf(this.$route.name)}}}),u=c,d=(a("bd11"),a("2877")),p=a("6544"),f=a.n(p),m=a("40dc"),v=a("8336"),h=a("132d"),g=a("2fa4"),b=a("2a7f"),w=Object(d["a"])(u,n,l,!1,null,"185d9894",null),_=w.exports;f()(w,{VAppBar:m["a"],VBtn:v["a"],VIcon:h["a"],VSpacer:g["a"],VToolbarTitle:b["a"]});var y={name:"App",components:{AppBar:_}},x=y,k=a("7496"),S=a("f6c4"),C=Object(d["a"])(x,s,i,!1,null,null,null),P=C.exports;f()(C,{VApp:k["a"],VMain:S["a"]});a("d3b7"),a("ac1f"),a("841c");var V=a("8c4f"),N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-parallax",{staticClass:"px-3",attrs:{src:a("7e33")}},[r("v-toolbar",{staticClass:"flex-grow-0",attrs:{flat:"",color:"transparent",dark:""}},[r("v-spacer"),r("top-navigation")],1),r("v-content",{staticClass:"d-flex align-center flex-grow-1"},[r("v-row",{attrs:{justify:"center mb-8"}},[r("v-col",{staticClass:"col-12 col-sm-10 col-md-8 col-lg-6 pb-12 text-center"},[r("h1",{staticClass:"text-h4 text-sm-h1 mb-6"},[t._v("Sing a song")]),r("v-text-field",{staticClass:"mb-0",attrs:{placeholder:"Sök vissångare",type:"search",solo:"",clearable:"","prepend-inner-icon":"mdi-magnify"}}),t._l(t.areas,(function(e){return r("v-chip",{key:e,staticClass:"elevation-1 ma-1",attrs:{color:"white",filter:"","input-value":e===t.selectedArea},on:{click:function(a){return t.filterOnArea(e)}}},[t._v(" "+t._s(e)+" ")])}))],2)],1)],1)],1),r("v-container",{staticClass:"pb-16"},[t.profiles.loading||t.profiles.error?r("v-row",{staticClass:"text-center"},[r("v-col",[t.profiles.loading?r("em",[t._v("Laddar profiler...")]):t._e(),t.profiles.error?r("v-alert",{attrs:{type:"error"}},[t._v(" ERROR: "+t._s(t.profiles.error)+" ")]):t._e()],1)],1):t._e(),t.profiles.items?[r("v-row",[r("v-col",[r("p",{staticClass:"py-2 px-2 ma-0"},[t._v("Senast tillagt")])])],1),t._l(t.profiles.items,(function(e){return r("v-row",{key:"profile-"+e.id,staticClass:"mb-2",attrs:{dense:""}},[r("v-col",{staticClass:"col-12 col-sm-6 col-md-3"},[r("v-card",{attrs:{color:"accent darken-1 rounded",dark:"",to:"/profile/"+e.id}},[r("v-img",{staticClass:"rounded",attrs:{"aspect-ratio":4/3,src:e.coverURL}}),r("v-overlay",{attrs:{absolute:"","z-index":"0"}},[r("v-card-text",{staticClass:"text-center"},[r("v-avatar",{staticClass:"elevation-3",attrs:{size:64,color:"accent darken-1"}},[e.avatarURL?r("img",{attrs:{src:e.avatarURL,alt:e.stageName||e.user.firstName+" "+e.user.lastName}}):r("span",{staticClass:"white--text text-h5"},[t._v(" "+t._s(e.stageName?e.stageName.slice(0,2):e.user.firstName[0]+e.user.lastName[0])+" ")])]),r("h3",{staticClass:"text-h5 mt-4"},[t._v(" "+t._s(e.stageName||e.user.firstName+" "+e.user.lastName)+" ")]),r("p",{staticClass:"text-overline text-decoration-underline mb-0"},[t._v("Visa mer")])],1)],1)],1)],1),t._l(e.media.slice(0,3),(function(t){return r("v-col",{key:t.id,staticClass:"col-12 col-sm-6 col-md-3"},[r("media-card",{attrs:{media:t}})],1)}))],2)}))]:t._e()],2)],1)},T=[],L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mediaCard",attrs:{color:"secondary darken-4"}},[a("v-responsive",{attrs:{"aspect-ratio":4/3}},["youtube"===t.media.provider?a("iframe",{attrs:{width:"480",height:"480",src:"https://www.youtube.com/embed/"+t.media.value+"?color=white",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e(),"spotify"===t.media.provider?a("iframe",{attrs:{src:"https://open.spotify.com/embed/"+t.media.type+"/"+t.media.value,width:"300",height:"380",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}}):t._e(),"vimeo"===t.media.provider?a("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://player.vimeo.com/video/"+t.media.value+"?color=ff9933&byline=0&portrait=0",frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:""}}):t._e(),"soundcloud"===t.media.provider?a("iframe",{attrs:{width:"100%",height:"450",scrolling:"no",rameborder:"no",allow:"autoplay",src:t.media.value}}):t._e()])],1)},R=[],O={name:"MediaCard",props:["media"]},$=O,A=(a("2b63"),a("b0af")),U=a("6b53"),j=Object(d["a"])($,L,R,!1,null,null,null),M=j.exports;f()(j,{VCard:A["a"],VResponsive:U["a"]});var I={name:"Home",title:"Sing a Song",components:{MediaCard:M},data:function(){return{areas:["Stockholm","Göteborg","Malmö","Uppsala"],selectedArea:!1}},computed:{profiles:function(){return this.$store.state.profiles.all}},created:function(){this.$store.dispatch("profiles/getAll")},methods:{filterOnArea:function(t){this.selectedArea===t?this.selectedArea=void 0:this.selectedArea=t,console.log({area:t})}}},E=I,F=a("0798"),D=a("8212"),J=a("99d9"),B=a("cc20"),z=a("62ad"),q=a("a523"),H=a("a75b"),G=a("adda"),K=a("a797"),X=a("8b9c"),Q=a("0fd9"),W=a("8654"),Y=a("71d9"),Z=Object(d["a"])(E,N,T,!1,null,null,null),tt=Z.exports;f()(Z,{VAlert:F["a"],VAvatar:D["a"],VCard:A["a"],VCardText:J["a"],VChip:B["a"],VCol:z["a"],VContainer:q["a"],VContent:H["a"],VImg:G["a"],VOverlay:K["a"],VParallax:X["a"],VRow:Q["a"],VSpacer:g["a"],VTextField:W["a"],VToolbar:Y["a"]});var et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-view",{attrs:{title:"Logga in",alert:this.alert},on:{submitted:t.handleSubmit}},[a("v-text-field",{attrs:{type:"email",label:"Email",outlined:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{label:"Lösenord",type:t.showPassword?"text":"password",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("v-icon",{attrs:{slot:"append"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-btn",{attrs:{color:"primary",disabled:t.loggingIn},on:{click:t.handleSubmit}},[t._v("Logga in")]),t.validationError?a("v-alert",{staticClass:"mt-2",attrs:{type:"error",text:"",transition:"scale-transition"}},[t._v(t._s(t.validationError))]):t._e(),a("p",{staticClass:"mt-8"},[a("router-link",{attrs:{to:"/forgot-password"}},[t._v("Glömt lösenord")]),t._v(" - Om du inte har något konto så "),a("router-link",{attrs:{to:"/register"}},[t._v("skapa ett här")]),t._v(". ")],1)],1)},at=[],rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"formView"},[t.alert?a("v-alert",{attrs:{type:t.alert.type}},[t._v(" "+t._s(t.alert.message)+" ")]):t._e(),a("v-row",{staticClass:"mt-12",attrs:{justify:"center"}},[a("v-col",{staticClass:"col-12 col-sm-5 col-md-4 col-lg-3 text-center"},[a("h1",{staticClass:"mb-10"},[t._v(t._s(t.title))]),a("v-form",{on:{submit:function(e){return e.preventDefault(),t.$emit("submitted")}}},[t._t("default")],2)],1)],1)],1)},ot=[],st={props:["alert","title"]},it=st,nt=a("4bd4"),lt=Object(d["a"])(it,rt,ot,!1,null,"6283f517",null),ct=lt.exports;f()(lt,{VAlert:F["a"],VCol:z["a"],VContainer:q["a"],VForm:nt["a"],VRow:Q["a"]});var ut={name:"Login",title:"Logga in | Sing a Song",components:{FormView:ct},data:function(){return{email:"",password:"",submitted:!1,validationError:!1,showPassword:!1}},computed:{loggingIn:function(){return this.$store.state.authentication.status.loggingIn},loggedIn:function(){return this.$store.state.authentication.status.loggedIn},alert:function(){return"loggedOut"===this.$route.params.status?{type:"warning",message:"Du blev utloggad. Logga in igen."}:"verifiedEmail"===this.$route.params.status?{type:"success",message:"Du är verifierad! Nu kan du logga in."}:"passwordReset"===this.$route.params.status?{type:"success",message:"Nu kan du logga in med ditt nya lösenord."}:void 0}},created:function(){this.$store.dispatch("authentication/logout")},watch:{loggedIn:function(){this.loggedIn&&this.$router.push("/")}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.email,a=this.password,r=this.$store.dispatch;e&&a&&r("authentication/login",{email:e,password:a}).then(null,(function(e){t.validationError=e}))}}},dt=ut,pt=Object(d["a"])(dt,et,at,!1,null,null,null),ft=pt.exports;f()(pt,{VAlert:F["a"],VBtn:v["a"],VIcon:h["a"],VTextField:W["a"]});var mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-view",{attrs:{title:"Glömt lösenord"},on:{submitted:t.handleSubmit}},[a("v-text-field",{attrs:{label:"Email",outlined:"",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-btn",{attrs:{color:"primary",disabled:t.submitted},on:{click:t.handleSubmit}},[t._v("Skicka nytt lösenord")]),t.success||t.error?a("v-alert",{staticClass:"mt-4",attrs:{color:t.success?"success":"error"}},[t._v(t._s(t.success||t.error))]):t._e()],1)},vt=[],ht={name:"ForgotPassword",title:"Glömt lösenord | Sing a Song",components:{FormView:ct},data:function(){return{submitted:!1,email:"",success:!1,error:!1}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.email,a=this.$store.dispatch;e&&a("authentication/forgotPassword",{email:e}).then((function(e){t.success=e.message,t.email="",t.submitted=!1}),(function(e){t.error=e,t.submitted=!1}))}}},gt=ht,bt=Object(d["a"])(gt,mt,vt,!1,null,null,null),wt=bt.exports;f()(bt,{VAlert:F["a"],VBtn:v["a"],VTextField:W["a"]});var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-view",{attrs:{title:"Återställ lösen"},on:{submitted:t.handleSubmit}},[t.tokenStatus?t._e():a("v-alert",{attrs:{type:"info"}},[t._v(" Laddar... ")]),"valid"===t.tokenStatus?[a("v-text-field",{attrs:{label:"Lösenord",type:t.showPassword?"text":"password",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("v-icon",{attrs:{slot:"append"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-text-field",{attrs:{label:"Lösenord igen",type:t.showPassword?"text":"password",outlined:""},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),a("v-btn",{attrs:{color:"primary",disabled:t.submitted},on:{click:t.handleSubmit}},[t._v("Spara nytt lösenord")]),t.success||t.error?a("v-alert",{staticClass:"mt-4",attrs:{color:t.success?"success":"error"}},[t._v(t._s(t.success||t.error))]):t._e()]:t._e(),"invalid"===t.tokenStatus?a("v-alert",{attrs:{type:"error"}},[t._v(" Något gick fel. Försök igen. ")]):t._e()],2)},yt=[],xt={name:"ResetPassword",title:"Nytt lösenord | Sing a Song",components:{FormView:ct},data:function(){return{password:"",confirmPassword:"",submitted:!1,success:!1,error:!1,tokenStatus:void 0,showPassword:!1}},created:function(){var t=this;this.$store.dispatch("authentication/validateResetToken",{token:this.token}).then((function(){t.tokenStatus="valid"}),(function(){t.tokenStatus="invalid"}))},computed:{token:function(){return this.$route.params.token}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.password,a=this.confirmPassword,r=this.token,o=this.$store.dispatch;e&&a&&o("authentication/resetPassword",{password:e,confirmPassword:a,token:r}).then((function(){t.$router.push("/login/passwordReset")}),(function(e){t.error=e,t.submitted=!1}))}}},kt=xt,St=Object(d["a"])(kt,_t,yt,!1,null,null,null),Ct=St.exports;f()(St,{VAlert:F["a"],VBtn:v["a"],VIcon:h["a"],VTextField:W["a"]});var Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-view",{attrs:{title:"Registrera dig"},on:{submitted:t.handleSubmit}},[t.success?a("div",[a("v-alert",{staticClass:"text-left",attrs:{type:"success"}},[a("strong",[t._v("Registreringen lyckades!")]),a("br"),t._v("Kolla i din e-post för vidare instruktioner.")])],1):a("div",[a("v-text-field",{attrs:{outlined:"",label:"Förnamn"},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),a("v-text-field",{attrs:{outlined:"",label:"Efternamn"},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),a("v-text-field",{attrs:{outlined:"",label:"Email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{label:"Lösenord",type:t.showPassword?"text":"password",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("v-icon",{attrs:{slot:"append"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-text-field",{attrs:{label:"Lösenord igen",type:t.showPassword?"text":"password",outlined:""},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),a("v-checkbox",{attrs:{label:"Genom att kryssa i godkänner du våra användarvilkor"},model:{value:t.acceptTerms,callback:function(e){t.acceptTerms=e},expression:"acceptTerms"}}),a("v-btn",{attrs:{color:"primary",disabled:t.submitted},on:{click:t.handleSubmit}},[t._v("Skapa konto")]),t.validation?a("v-alert",{staticClass:"mt-2",attrs:{type:"error",text:"",transition:"scale-transition"}},[t._v(t._s(t.validation))]):t._e(),a("p",{staticClass:"mt-8"},[t._v("Om du redan har ett konto så "),a("router-link",{attrs:{to:"/login"}},[t._v("logga in här")]),t._v(".")],1)],1)])},Vt=[],Nt={name:"Register",title:"Registrera dig | Sing a Song",components:{FormView:ct},data:function(){return{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1,submitted:!1,success:!1,showPassword:!1,validation:!1}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.firstName,a=this.lastName,r=this.email,o=this.password,s=this.confirmPassword,i=this.acceptTerms,n=this.$store.dispatch;n("authentication/register",{firstName:e,lastName:a,email:r,password:o,confirmPassword:s,acceptTerms:i}).then((function(){t.success=!0}),(function(e){t.validation=e,t.submitted=!1}))}}},Tt=Nt,Lt=a("ac7c"),Rt=Object(d["a"])(Tt,Pt,Vt,!1,null,null,null),Ot=Rt.exports;f()(Rt,{VAlert:F["a"],VBtn:v["a"],VCheckbox:Lt["a"],VIcon:h["a"],VTextField:W["a"]});var $t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("v-tabs",{staticClass:"mb-16",attrs:{color:"primary"}},[a("v-tab",{attrs:{to:"/account/account"}},[t._v("Ditt konto")]),a("v-tab",{attrs:{to:"/account/profile"}},[t._v("Din profil")]),a("v-tab",{attrs:{to:"/account/media"}},[t._v("Din media")])],1)],1)],1),a("v-tabs-items",{model:{value:t.$route.params.tab,callback:function(e){t.$set(t.$route.params,"tab",e)},expression:"$route.params.tab"}},[a("v-tab-item",{attrs:{value:"account"}},[a("v-row",[a("v-col",{staticClass:"col-6 pb-4"},[a("h2",{staticClass:"text-h2"},[t._v("Ditt konto")]),a("p",{staticClass:"mt-4 text--disabled text-body-2"},[t._v("Gick med "+t._s(t.user.created))]),a("h3",{staticClass:"text-h3 mt-8"},[t._v("Kontoinformation")]),a("v-form",{on:{submit:function(e){return e.preventDefault(),t.updateAccount(e)}}},[a("v-text-field",{attrs:{label:"Förnamn"},model:{value:t.user.firstName,callback:function(e){t.$set(t.user,"firstName",e)},expression:"user.firstName"}}),a("v-text-field",{attrs:{label:"Efternamn"},model:{value:t.user.lastName,callback:function(e){t.$set(t.user,"lastName",e)},expression:"user.lastName"}}),a("v-text-field",{attrs:{label:"Email",type:"email"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-btn",{attrs:{disabled:t.submitted},on:{click:t.updateAccount}},[t._v("Uppdatera konto")]),t.validation&&"account"===t.validation.target?a("v-alert",{staticClass:"mt-2",attrs:{type:t.validation.type,text:"",transition:"scale-transition"}},[t._v(t._s(t.validation.message))]):t._e()],1),a("h3",{staticClass:"text-h3 mt-8"},[t._v("Ändra lösenord")]),a("v-form",[a("v-text-field",{attrs:{label:"Lösenord",type:t.showPassword?"text":"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("v-icon",{attrs:{slot:"append"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-text-field",{attrs:{label:"Lösenord igen",type:t.showPassword?"text":"password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}},[a("v-icon",{attrs:{slot:"append"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-btn",{attrs:{disabled:t.submitted},on:{click:t.updatePassword}},[t._v("Uppdatera lösenord")]),t.validation&&"password"===t.validation.target?a("v-alert",{staticClass:"mt-2",attrs:{type:t.validation.type,text:"",transition:"scale-transition"}},[t._v(t._s(t.validation.message))]):t._e()],1),a("h3",{staticClass:"text-h3 mt-8 mb-4"},[t._v("Farliga grejer")]),a("v-form",[t.askToDeleteUser?a("v-btn",{attrs:{color:"error"},on:{click:t.deleteUser}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-delete")]),t._v(" Är du helt säker? Det går inte att ångra ")],1):a("v-btn",{attrs:{color:"error",outlined:""},on:{click:function(e){t.askToDeleteUser=!0}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-delete")]),t._v(" Radera konto ")],1)],1)],1)],1)],1),a("v-tab-item",{attrs:{value:"profile"}},[t.profile.coverURL?a("v-row",[a("v-col",{staticClass:"pa-0"},[a("v-parallax",{staticClass:"ma-1 mt-4 rounded",attrs:{height:"250",src:t.profile.coverURL}},[a("v-row",{attrs:{align:"start",justify:"end"}},[a("v-col",{staticClass:"pt-7",attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"primary",to:"/account/profile"}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)],1)],1)],1):t._e(),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"col-3 text-center"},[a("v-avatar",{staticClass:"elevation-5",class:{"mt-n13":!!t.profile.coverURL,"mt-4":!t.profile.coverURL},attrs:{size:t.profile.avatarURL?128:64,color:"accent darken-1"}},[t.profile.avatarURL?a("img",{attrs:{src:t.profile.avatarURL,alt:t.profile.stageName}}):a("span",{staticClass:"white--text text-h5"},[t._v(" "+t._s(t.profile.stageName?t.profile.stageName.slice(0,2):t.user.firstName[0]+t.user.lastName[0])+" ")])])],1)],1),a("v-row",[a("v-col",{staticClass:"col-8 pb-4"},[a("h2",{staticClass:"text-h2"},[t._v("Din profil")]),t.profile?[a("v-file-input",{attrs:{"show-size":"","truncate-length":"15",label:"Ladda upp ny profilbild",accept:"image/*"},model:{value:t.avatarFile,callback:function(e){t.avatarFile=e},expression:"avatarFile"}}),a("v-file-input",{attrs:{"show-size":"","truncate-length":"15",label:"Ladda upp ny omslagsbild",accept:"image/*"},model:{value:t.coverFile,callback:function(e){t.coverFile=e},expression:"coverFile"}}),a("v-text-field",{attrs:{label:"Artistnamn"},model:{value:t.profile.stageName,callback:function(e){t.$set(t.profile,"stageName",e)},expression:"profile.stageName"}}),a("v-textarea",{attrs:{label:"Beskrivning",hint:"Visas på din profil","auto-grow":"",rows:"3"},model:{value:t.profile.description,callback:function(e){t.$set(t.profile,"description",e)},expression:"profile.description"}}),a("v-combobox",{attrs:{items:t.areas,label:"Vilka regioner kan du uppträda i?",multiple:"",chips:""},model:{value:t.profile.geoReach,callback:function(e){t.$set(t.profile,"geoReach",e)},expression:"profile.geoReach"}}),a("v-textarea",{attrs:{label:"Kontaktuppgifter",hint:"E-postadresser kommer förvandlas till länkar.","auto-grow":"",rows:"3"},model:{value:t.profile.contactDetails,callback:function(e){t.$set(t.profile,"contactDetails",e)},expression:"profile.contactDetails"}}),a("v-btn",{staticClass:"mb-4",attrs:{disabled:t.submitted},on:{click:t.updateProfile}},[t._v("Uppdatera konto")]),t.validation&&"profile"===t.validation.target?a("v-alert",{staticClass:"mt-2",attrs:{type:t.validation.type,text:"",transition:"scale-transition"}},[t._v(t._s(t.validation.message))]):t._e(),a("p",[a("router-link",{attrs:{to:"/profile/"+t.profile.id}},[t._v("Besök din profil")])],1)]:[a("p",[t._v("Laddar profil...")])]],2)],1)],1),a("v-tab-item",{attrs:{value:"media"}},[a("v-row",[a("v-col",[a("h2",{staticClass:"text-h2 mb-4"},[t._v("Din media")])])],1),a("v-row",[a("v-col",[a("v-card",{staticClass:"pa-4 elevation-4"},[a("v-text-field",{attrs:{label:"Lägg till media",hint:"Klistra in länken till din media här",color:"success"},model:{value:t.newMediaURL,callback:function(e){t.newMediaURL=e},expression:"newMediaURL"}}),a("v-btn",{attrs:{disabled:!t.newMediaValidation,color:"primary"},on:{click:t.addNewMedia}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Lägg till ")],1),t.newMediaValidation?a("v-alert",{staticClass:"mt-2",attrs:{type:"success",transition:"scale-transition",outlined:""}},[t._v(" Länken är en "),a("strong",[t._v(t._s(t.newMediaValidation.provider)+" "+t._s(t.newMediaValidation.mediaType||t.newMediaValidation.type))]),t._v(". ")]):t._e(),t.validation&&"media"===t.validation.target?a("v-alert",{staticClass:"mt-2",attrs:{type:t.validation.type,text:"",transition:"scale-transition"}},[t._v(t._s(t.validation.message))]):t._e()],1)],1)],1),a("v-row",{attrs:{dense:""}},t._l(t.profile.media,(function(e){return a("v-col",{key:e.id,staticClass:"d-flex child-flex col-12 col-sm-6 col-md-4",staticStyle:{position:"relative"}},[a("v-btn",{staticStyle:{top:"0px",right:"0px"},attrs:{elevation:"2",fab:"",dark:"",color:"primary",absolute:"",small:""},on:{click:function(a){return t.deleteMedia(e)}}},[a("v-icon",[t._v("mdi-delete")])],1),a("media-card",{attrs:{media:e}})],1)})),1)],1)],1)],1)},At=[];a("99af"),a("7db0"),a("1276");function Ut(){var t=JSON.parse(localStorage.getItem("user"));return t&&t.jwtToken?{"Content-Type":"application/json",Authorization:"Bearer "+t.jwtToken}:{}}a("25f0"),a("5319"),a("498a");function jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t?t.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,e):""}var Mt="/api",It={authHeader:Ut,apiUrl:Mt,slugify:jt},Et=a("8b94"),Ft=a.n(Et),Dt=a("f596"),Jt=a.n(Dt),Bt={name:"Account",title:"Ditt konto | Sing a Song",components:{MediaCard:M},data:function(){return{submitted:!1,areas:["Götaland","Svealand","Södra Norrland","Norra Norrland"],password:"",confirmPassword:"",validation:{},newMediaURL:void 0,avatarFile:void 0,coverFile:void 0,askToDeleteUser:!1,showPassword:!1}},computed:{user:{get:function(){return this.$store.state.authentication.user},set:function(){}},profile:function(){var t=this;return!!this.$store.state.profiles.all.items&&this.$store.state.profiles.all.items.find((function(e){return e.userId===t.user.id}))},newMediaValidation:function(){return this.newMediaURL?-1!==this.newMediaURL.search("spotify")?Object.assign(Ft.a.parse(this.newMediaURL),{provider:"spotify"}):Jt.a.parse(this.newMediaURL):void 0},soundcloudValue:function(){if("soundcloud"===this.newMediaValidation.provider){var t=this.newMediaURL.split("src")[1].split('"')[1];return t}}},created:function(){this.$store.dispatch("profiles/getAll")},watch:{avatarFile:function(t){if(!t)return!1;this.updateImage(t,"avatar")},coverFile:function(t){if(!t)return!1;this.updateImage(t,"cover")},askToDeleteUser:function(){var t=this;this.askToDeleteUser&&setTimeout((function(){t.askToDeleteUser=!1}),5e3)},validation:function(){var t=this;this.validation.target&&setTimeout((function(){t.validation={}}),1e4)}},methods:{updateAccount:function(){var t=this;this.validation={},this.submitted=!0,this.$store.dispatch("authentication/update",this.user).then((function(){t.validation={target:"account",message:"Ditt konto sparades",type:"success"},t.submitted=!1}),(function(e){t.validation={target:"account",message:e,type:"error"},t.submitted=!1}))},updatePassword:function(){var t=this;this.validation={},this.submitted=!0,this.$store.dispatch("authentication/update",{id:this.user.id,password:this.password,confirmPassword:this.confirmPassword}).then((function(){t.validation={target:"password",message:"Ditt lösenord uppdaterades",type:"success"},t.submitted=!1}),(function(e){t.validation={target:"password",message:e,type:"error"},t.submitted=!1}))},deleteUser:function(){console.log("delete user:"+this.user.id),this.$store.dispatch("authentication/_delete",this.user.id)},updateProfile:function(){var t=this;this.validation={},this.submitted=!0,this.$store.dispatch("profiles/update",this.profile).then((function(){t.validation={target:"profile",message:"Din profil uppdaterades",type:"success"},t.submitted=!1}),(function(e){t.validation={target:"profile",message:e,type:"error"},t.submitted=!1}))},updateImage:function(t,e){var a=this;function r(t,r,o){var s=new XMLHttpRequest;s.open("PUT",r),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var t={id:a.profile.id,userId:a.user.id};"avatar"===e?t.avatarURL=o:"cover"===e?t.coverURL=o:console.error("missing target"),a.$store.dispatch("profiles/update",t).then((function(t){a.$store.commit("profiles/update",t)}))}else console.error("Could not upload file.")},s.send(t)}var o=new XMLHttpRequest;o.open("GET","".concat(It.apiUrl,"/sign-s3?file-name=").concat(t.name,"&file-type=").concat(t.type)),o.setRequestHeader("Authorization",It.authHeader().Authorization),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=JSON.parse(o.responseText);r(t,e.signedRequest,e.url)}else console.error("Could not get signed URL.")},o.send()},addNewMedia:function(){var t=this;if(!this.newMediaValidation)return!1;this.mediaValidationError=void 0,this.submitted=!0,this.$store.dispatch("media/add",{newMediaURL:this.soundcloudValue||this.newMediaURL,profileId:this.profile.id}).then((function(e){t.validation={target:"media",message:"Media tillagt",type:"success"},t.submitted=!1,t.newMediaURL="",t.$store.commit("profiles/addMedia",e)}),(function(e){t.validation={target:"media",message:e,type:"error"},t.mediaValidationError=e}))},deleteMedia:function(t){var e=this;this.$store.dispatch("media/remove",t).then((function(){e.$store.commit("profiles/deleteMedia",t)}),(function(t){console.log(t)}))}}},zt=Bt,qt=a("2b5d"),Ht=a("23a7"),Gt=a("71a3"),Kt=a("c671"),Xt=a("fe57"),Qt=a("aac8"),Wt=a("a844"),Yt=Object(d["a"])(zt,$t,At,!1,null,null,null),Zt=Yt.exports;f()(Yt,{VAlert:F["a"],VAvatar:D["a"],VBtn:v["a"],VCard:A["a"],VCol:z["a"],VCombobox:qt["a"],VContainer:q["a"],VFileInput:Ht["a"],VForm:nt["a"],VIcon:h["a"],VParallax:X["a"],VRow:Q["a"],VTab:Gt["a"],VTabItem:Kt["a"],VTabs:Xt["a"],VTabsItems:Qt["a"],VTextField:W["a"],VTextarea:Wt["a"]});var te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.profile?[t.profile.coverURL?a("v-parallax",{attrs:{height:"320",src:t.profile.coverURL}},[a("v-toolbar",{staticClass:"flex-grow-0",attrs:{flat:"",color:"transparent",dark:""}},[a("v-btn",{attrs:{to:"/",icon:""}},[a("svg",{staticClass:"appbar-logo",attrs:{version:"1.1",id:"Lager_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512"}},[a("g",[a("path",{staticClass:"st0",attrs:{d:"M268.4,403.8c-31.5,1.9-62.4-2.7-93.2-8.9c-6.4-1.3-11-0.1-16.1,3.7c-22.8,16.7-44.9,34.1-65,54.1 c-2.6,2.6-5.6,5.3-8.8,6.9c-7.6,3.7-14.3-0.7-14.5-9.1c-0.1-6.3,0.9-12.8,3.9-18.1c11-19.2,10.5-39.8,8.4-60.6 c-0.7-7.4-4.8-12-11.8-16.1c-19.7-11.2-38.4-24.1-51.7-43.1c-4.7-6.7-7.6-15-9.8-22.3c-4.1-13.3-8.2-26.9-9.5-41.2 c-1.5-16.7,1.6-32.2,5.5-48.1c6-24.2,21.1-42.3,38-59.3c5.8-5.9,11.5-12.1,17.2-18c7.9-8.2,17.4-15.1,26.8-21.7 c10.4-7.3,21.3-13.9,32.4-20.2c22.9-13,47.7-20.5,73.6-25.3c48.9-9.1,97.2-6.6,145.1,5.4c27.6,6.9,54.3,16.6,79.9,29.2 c29.1,14.3,50.5,36.1,65.9,64.2c8.2,15,15.5,30.3,22,46.1c1.6,3.8,2.5,8,3.1,12.1c5.1,32.2,0.7,63.7-12,93.2 c-14.7,34.1-42,55.3-76.1,69.6c-38.1,16.1-77.9,22.8-118.4,27.3C291.9,404.9,280.1,403.8,268.4,403.8z M298.8,199.6 c0-22.5,0.3-45-0.1-67.5c-0.2-10.2-4-12.7-14.6-12.3c-9,0.3-10.2,1.9-10.4,12.8c0,3.7,0,7.5,0.1,11.2c1.5,35.8-0.9,71.6-0.9,107.5 c0,9.2-0.6,9.7-9,7.3c-18.6-5.2-35.6-1.8-50.9,9.5c-20.5,15-18.6,30.5-2.1,45.3c1.8,1.6,4.1,2.8,6.3,4.1 c16.3,9.6,33.4,8.5,50.8,4.2c18.3-4.5,26.1-19.4,30.3-35c3.4-12.6,4.1-26.4,2.9-39.7C299.8,231.2,300.6,215.4,298.8,199.6z"}})])])]),a("v-toolbar-title",[a("router-link",{staticClass:"secondary--text text-decoration-none",attrs:{to:"/"}},[t._v("Sing a song")])],1),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-magnify")])],1),a("top-navigation")],1),a("v-container",{staticClass:"flex-grow-1 px-0"},[t.showEdit?a("v-row",{attrs:{align:"start",justify:"end"}},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"primary",to:"/account/profile"}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-pen")]),t._v(" Redigera profil ")],1)],1)],1):t._e()],1)],1):a("v-toolbar",{attrs:{flat:"",color:"transparent"}},[a("v-btn",{attrs:{to:"/",icon:""}},[a("svg",{staticClass:"appbar-logo",attrs:{version:"1.1",id:"Lager_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512"}},[a("g",[a("path",{staticClass:"st0",attrs:{d:"M268.4,403.8c-31.5,1.9-62.4-2.7-93.2-8.9c-6.4-1.3-11-0.1-16.1,3.7c-22.8,16.7-44.9,34.1-65,54.1 c-2.6,2.6-5.6,5.3-8.8,6.9c-7.6,3.7-14.3-0.7-14.5-9.1c-0.1-6.3,0.9-12.8,3.9-18.1c11-19.2,10.5-39.8,8.4-60.6 c-0.7-7.4-4.8-12-11.8-16.1c-19.7-11.2-38.4-24.1-51.7-43.1c-4.7-6.7-7.6-15-9.8-22.3c-4.1-13.3-8.2-26.9-9.5-41.2 c-1.5-16.7,1.6-32.2,5.5-48.1c6-24.2,21.1-42.3,38-59.3c5.8-5.9,11.5-12.1,17.2-18c7.9-8.2,17.4-15.1,26.8-21.7 c10.4-7.3,21.3-13.9,32.4-20.2c22.9-13,47.7-20.5,73.6-25.3c48.9-9.1,97.2-6.6,145.1,5.4c27.6,6.9,54.3,16.6,79.9,29.2 c29.1,14.3,50.5,36.1,65.9,64.2c8.2,15,15.5,30.3,22,46.1c1.6,3.8,2.5,8,3.1,12.1c5.1,32.2,0.7,63.7-12,93.2 c-14.7,34.1-42,55.3-76.1,69.6c-38.1,16.1-77.9,22.8-118.4,27.3C291.9,404.9,280.1,403.8,268.4,403.8z M298.8,199.6 c0-22.5,0.3-45-0.1-67.5c-0.2-10.2-4-12.7-14.6-12.3c-9,0.3-10.2,1.9-10.4,12.8c0,3.7,0,7.5,0.1,11.2c1.5,35.8-0.9,71.6-0.9,107.5 c0,9.2-0.6,9.7-9,7.3c-18.6-5.2-35.6-1.8-50.9,9.5c-20.5,15-18.6,30.5-2.1,45.3c1.8,1.6,4.1,2.8,6.3,4.1 c16.3,9.6,33.4,8.5,50.8,4.2c18.3-4.5,26.1-19.4,30.3-35c3.4-12.6,4.1-26.4,2.9-39.7C299.8,231.2,300.6,215.4,298.8,199.6z"}})])])]),a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",attrs:{to:"/"}},[t._v("Sing a song")])],1),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-magnify")])],1),a("top-navigation")],1)]:t._e(),a("v-container",{staticClass:"pb-16"},[t.profile?[a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"col-3 text-center"},[a("v-avatar",{staticClass:"elevation-5",class:{"mt-n13":!!t.profile.coverURL,"mt-4":!t.profile.coverURL},attrs:{size:t.profile.avatarURL?128:64,color:"accent darken-1"}},[t.profile.avatarURL?a("img",{attrs:{src:t.profile.avatarURL,alt:t.profile.stageName||t.userName}}):a("span",{staticClass:"white--text text-h5"},[t._v(" "+t._s(t.profile.stageName?t.profile.stageName.slice(0,2):t.profile.user.firstName[0]+t.profile.user.lastName[0])+" ")])])],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"text-center col-12 col-sm-8"},[a("h1",{staticClass:"text-h3 mb-4"},[t._v(t._s(t.profileName))]),a("p",[t._v(t._s(t.profile.description))]),a("p",[a("strong",{staticClass:"accent--text"},[t._v("Kontakt:")]),t._v(" "+t._s(t.profile.contactDetails||"Inga kontaktuppgifter finns"))])])],1),a("v-row",t._l(t.profile.media,(function(t){return a("v-col",{key:t.id,staticClass:"d-flex child-flex pa-1 col-12 col-sm-6 col-md-4"},[a("media-card",{attrs:{media:t}})],1)})),1)]:a("v-row",[a("v-col",[a("h1",{staticClass:"text-h1 mt-16"},[t._v("Laddar")])])],1)],2)],2)},ee=[],ae={name:"Profile",title:function(){return"".concat(this.profileName," | Sing a Song")},components:{MediaCard:M},data:function(){return{}},created:function(){this.$store.dispatch("profiles/getAll")},watch:{profileSlug:function(){!this.$route.params.slug!==this.profileSlug&&this.$router.push("/profile/".concat(this.id,"/").concat(this.profileSlug))}},computed:{id:function(){return this.$route.params.id},profile:function(){var t=this;if(this.$store.state.profiles.all.items)return this.$store.state.profiles.all.items.find((function(e){return e.id==t.id}))},profileName:function(){if(this.$store.state.profiles.all.items)return this.profile.stageName||this.profile.user.firstName+" "+this.profile.user.lastName},profileSlug:function(){return It.slugify(this.profileName)},userName:function(){return this.profile.user.firstName+" "+this.profile.user.lastName},showEdit:function(){return!!this.$store.state.authentication.user&&this.profile.userId===this.$store.state.authentication.user.id}}},re=ae,oe=(a("2a37"),Object(d["a"])(re,te,ee,!1,null,null,null)),se=oe.exports;f()(oe,{VAvatar:D["a"],VBtn:v["a"],VCol:z["a"],VContainer:q["a"],VIcon:h["a"],VParallax:X["a"],VRow:Q["a"],VSpacer:g["a"],VToolbar:Y["a"],VToolbarTitle:b["a"]}),r["a"].use(V["a"]);var ie=[{path:"/",name:"Home",component:tt},{path:"/login",name:"Login",component:ft},{path:"/login/:status",name:"Time to Login",component:ft},{path:"/forgot-password",name:"Forgot Password",component:wt},{path:"/reset-password/:token",name:"Reset Password",component:Ct},{path:"/register",name:"Register",component:Ot},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/account/:tab",name:"Account Details",component:Zt},{alias:"/account",path:"/account/account",component:Zt},{path:"/profile/:id",name:"Profile Redirect",component:se},{path:"/profile/:id/:slug",name:"Profile",component:se}],ne=new V["a"]({mode:"history",routes:ie});ne.beforeEach((function(t,e,a){var r=-1!==t.path.search("account"),o=localStorage.getItem("user");if(r&&!o)return a("/login");a()}));var le,ce=ne,ue=a("2f62"),de=It.authHeader,pe=It.apiUrl,fe={login:me,forgotPassword:he,validateResetToken:ge,resetPassword:be,logout:we,register:_e,update:ye,_delete:xe,getAll:ke};function me(t,e){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})};return fetch("".concat(pe,"/users/authenticate"),a).then(Se).then((function(t){return t.jwtToken&&(localStorage.setItem("user",JSON.stringify(t)),Ce()),t}))}function ve(){if("production"!==Object({NODE_ENV:"production",BASE_URL:"/"}))return console.log("Not in production, not using refresh token");var t={method:"POST"};return fetch("".concat(pe,"/users/refresh-token"),t).then(Se).then((function(t){return t.jwtToken&&(localStorage.setItem("user",JSON.stringify(t)),Ce()),t}))}function he(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})};return fetch("".concat(pe,"/users/forgot-password"),e).then(Se)}function ge(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})};return fetch("".concat(pe,"/users/validate-reset-token"),e).then(Se)}function be(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("".concat(pe,"/users/reset-password"),e).then(Se)}function we(){localStorage.removeItem("user"),Pe()}function _e(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("".concat(pe,"/users/register"),e).then(Se)}function ye(t){var e={method:"PUT",headers:de(),body:JSON.stringify(t)};return fetch("".concat(pe,"/users/").concat(t.id),e).then(Se).then((function(t){var e=JSON.parse(localStorage.getItem("user"));Object.assign(e,t),localStorage.setItem("user",JSON.stringify(e))}))}function xe(t){var e={method:"DELETE",headers:de()};return fetch("".concat(pe,"/users/").concat(t),e).then(Se).then((function(){we(),location.href="/"}))}function ke(){var t={method:"GET",headers:de()};return fetch("".concat(pe,"/users"),t).then(Se)}function Se(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(we(),location.href="/#/login/loggedOut");var r=a&&a.message||t.statusText;return Promise.reject(r)}return a}))}function Ce(){var t=JSON.parse(localStorage.getItem("user")),e=JSON.parse(atob(t.jwtToken.split(".")[1])),a=new Date(1e3*e.exp),r=a.getTime()-Date.now()-6e4;le=setTimeout(ve,r)}function Pe(){clearTimeout(le)}ve();var Ve=It.authHeader,Ne=It.apiUrl,Te={getAll:Le,update:Re};function Le(){var t={method:"GET",headers:Ve()};return fetch("".concat(Ne,"/profiles"),t).then(Oe)}function Re(t){var e={method:"PUT",headers:Ve(),body:JSON.stringify(t)};return fetch("".concat(Ne,"/profiles/").concat(t.id),e).then(Oe)}function Oe(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(fe.logout(),location.reload(!0));var r=a&&a.message||t.statusText;return Promise.reject(r)}return a}))}var $e=It.authHeader,Ae=It.apiUrl,Ue={getAll:je,create:Me,update:Ie,remove:Ee};function je(){var t={method:"GET",headers:$e()};return fetch("".concat(Ae,"/media"),t).then(Fe)}function Me(t){var e={method:"POST",headers:$e(),body:JSON.stringify(t)};return fetch("".concat(Ae,"/media/"),e).then(Fe)}function Ie(t){var e={method:"PUT",headers:$e(),body:JSON.stringify(t)};return fetch("".concat(Ae,"/media/").concat(t.id),e).then(Fe)}function Ee(t){var e={method:"DELETE",headers:$e(),body:JSON.stringify(t)};return fetch("".concat(Ae,"/media/").concat(t.id),e).then(Fe)}function Fe(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(fe.logout(),location.reload(!0));var r=a&&a.message||t.statusText;return Promise.reject(r)}return a}))}var De={userService:fe,profileService:Te,mediaService:Ue},Je=JSON.parse(localStorage.getItem("user")),Be=Je?{status:{loggedIn:!0},user:Je}:{status:{},user:null},ze={namespaced:!0,state:Be,actions:{login:function(t,e){var a=t.commit,r=e.email,o=e.password;return new Promise((function(t,e){a("loginRequest",{email:r}),De.userService.login(r,o).then((function(e){a("loginSuccess",e),t(e)}),(function(t){a("loginFailure",t),e(t)}))}))},forgotPassword:function(t,e){var a=e.email;return new Promise((function(t,e){De.userService.forgotPassword(a).then((function(e){t(e)}),(function(t){e(t)}))}))},validateResetToken:function(t,e){var a=e.token;return new Promise((function(t,e){De.userService.validateResetToken(a).then((function(e){t(e)}),(function(t){e(t)}))}))},resetPassword:function(t,e){return new Promise((function(t,a){De.userService.resetPassword(e).then((function(e){t(e)}),(function(t){a(t)}))}))},logout:function(t){var e=t.commit;De.userService.logout(),e("logout")},register:function(t,e){return new Promise((function(t,a){De.userService.register(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))},update:function(t,e){return new Promise((function(t,a){De.userService.update(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))},_delete:function(t,e){var a=t.dispatch;De.userService._delete(e).then((function(){a("authentication/logout")}),(function(t){console.error({error:t})}))}},mutations:{loginRequest:function(t,e){t.status={loggingIn:!0},t.user=e},loginSuccess:function(t,e){t.status={loggedIn:!0},t.user=e},loginFailure:function(t){t.status={},t.user=null},logout:function(t){t.status={},t.user=null}}},qe={namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit;e("getAllRequest"),De.userService.getAll().then((function(t){return e("getAllSuccess",t)}),(function(t){return e("getAllFailure",t)}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}}}},He=(a("c740"),a("a434"),{namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit;e("getAllRequest"),De.profileService.getAll().then((function(t){return e("getAllSuccess",t)}),(function(t){return e("getAllFailure",t)}))},update:function(t,e){return new Promise((function(t,a){De.profileService.update(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}},addMedia:function(t,e){t.all.items.find((function(t){return t.id===e.profileId})).media.unshift(e)},update:function(t,e){var a=t.all.items.findIndex((function(t){return t.id===e.profileId}));t.all.items.splice(a,1,e)},deleteMedia:function(t,e){var a=t.all.items.find((function(t){return t.id===e.profileId})),r=a.media.findIndex((function(t){return t.id===e.id}));a.media.splice(r,1)}}}),Ge={namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit;e("getAllRequest"),De.mediaService.getAll().then((function(t){return e("getAllSuccess",t)}),(function(t){return e("getAllFailure",t)}))},add:function(t,e){var a=e.newMediaURL,r=e.profileId,o={};return-1!==a.search("spotify")?o=Object.assign(Ft.a.parse(a),{provider:"spotify",url:a}):-1!==a.search("soundcloud")?o={type:"sc",id:a,provider:"soundcloud",url:a}:(o=Object.assign(Jt.a.parse(a),{url:a}),o.type=o.mediaType),o.value=o.id,o.profileId=r,new Promise((function(t,e){De.mediaService.create(o).then((function(e){t(e)}),(function(t){console.error({error:t}),e(t)}))}))},update:function(t,e){return new Promise((function(t,a){De.mediaService.update(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))},remove:function(t,e){return new Promise((function(t,a){De.mediaService.remove(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}}}};r["a"].use(ue["a"]);var Ke=new ue["a"].Store({modules:{authentication:ze,users:qe,profiles:He,media:Ge}}),Xe=a("f309"),Qe=a("c1f1"),We=a("fcf4");r["a"].use(Xe["a"]);var Ye=new Xe["a"]({lang:{locales:{sv:Qe["a"]},current:"sv"},theme:{options:{customProperties:!0},themes:{light:{primary:We["a"].deepPurple.darken1,secondary:We["a"].deepOrange.lighten5,accent:We["a"].deepOrange.base,error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});function Ze(t){var e=t.$options.title;if(e)return"function"===typeof e?e.call(t):e}var ta={created:function(){var t=Ze(this);t&&(document.title=t)}},ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.$store.state.authentication.user?a("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),r),[a("v-icon",[t._v("mdi-account")])],1)]}}],null,!1,1415903684)},[a("v-list",[a("v-list-item",{attrs:{to:"/account"}},[a("v-list-item-title",[t._v(" Ditt konto ")])],1),a("v-list-item",{attrs:{to:"/login"}},[a("v-list-item-title",[t._v(" Logga ut "+t._s(t.$store.state.authentication.user.firstName)+" ")])],1)],1)],1):[t.$vuetify.breakpoint.xs?a("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),r),[a("v-icon",[t._v("mdi-menu")])],1)]}}],null,!1,2322017526)},[a("v-list",[a("v-list-item",{attrs:{to:"/login"}},[a("v-list-item-title",[t._v(" Logga in ")])],1),a("v-list-item",{attrs:{to:"/register"}},[a("v-list-item-title",[t._v(" Skapa konto ")])],1)],1)],1):[a("v-btn",{attrs:{plain:"",to:"/login"}},[t._v("Logga in")]),a("v-btn",{attrs:{outlined:"",to:"/register"}},[t._v("Skapa konto")])]]],2)},aa=[],ra={},oa=ra,sa=a("8860"),ia=a("da13"),na=a("5d23"),la=a("e449"),ca=Object(d["a"])(oa,ea,aa,!1,null,"0a629a88",null),ua=ca.exports;f()(ca,{VBtn:v["a"],VIcon:h["a"],VList:sa["a"],VListItem:ia["a"],VListItemTitle:na["b"],VMenu:la["a"]}),r["a"].mixin(ta),r["a"].use(o["a"]),r["a"].component("TopNavigation",ua),r["a"].config.productionTip=!1,new r["a"]({router:ce,store:Ke,vuetify:Ye,render:function(t){return t(P)}}).$mount("#app")},"5ccf":function(t,e,a){},6102:function(t,e,a){},"6bd7":function(t,e,a){},"7e33":function(t,e,a){t.exports=a.p+"img/frontpage-hero.2d9fe1ed.jpg"},bd11:function(t,e,a){"use strict";a("6bd7")}});
//# sourceMappingURL=app.a1aeb930.js.map