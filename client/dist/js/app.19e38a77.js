(function(t){function e(e){for(var r,n,s=e[0],l=e[1],c=e[2],u=0,f=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&f.push(i[n][0]),i[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},i={app:0},o=[];function n(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"3bbf0e51"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,r){a=i[t]=[e,r]}));e.push(a[2]=r);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=n(t);var c=new Error;o=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=i[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,a[1](c)}i[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},"2b63":function(t,e,a){"use strict";a("6102")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=a("28dd"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:"","elevate-on-scroll":""}},[a("v-toolbar-title",[t._v("Sing-a-song")]),a("v-spacer"),a("v-btn",{attrs:{to:"/",icon:""}},[a("v-icon",[t._v("mdi-home")])],1),t.$store.state.authentication.user?a("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),r),[a("v-icon",[t._v("mdi-account")])],1)]}}],null,!1,1415903684)},[a("v-list",[a("v-list-item",{attrs:{to:"/account"}},[a("v-list-item-title",[t._v(" Ditt konto ")])],1),a("v-list-item",{attrs:{to:"/login"}},[a("v-list-item-title",[t._v(" Logga ut "+t._s(t.$store.state.authentication.user.firstName)+" ")])],1)],1)],1):[a("v-btn",{attrs:{plain:"",to:"/login"}},[t._v("Logga in")]),a("v-btn",{attrs:{outlined:"",to:"/register"}},[t._v("Skapa konto")])]],2),a("v-main",[a("router-view")],1)],1)},n=[],s={data:function(){return{}}},l=s,c=a("2877"),u=a("6544"),d=a.n(u),f=a("7496"),p=a("40dc"),m=a("8336"),v=a("132d"),h=a("8860"),g=a("da13"),b=a("5d23"),w=a("f6c4"),_=a("e449"),y=a("2fa4"),x=a("2a7f"),V=Object(c["a"])(l,o,n,!1,null,null,null),k=V.exports;d()(V,{VApp:f["a"],VAppBar:p["a"],VBtn:m["a"],VIcon:v["a"],VList:h["a"],VListItem:g["a"],VListItemTitle:b["b"],VMain:w["a"],VMenu:_["a"],VSpacer:y["a"],VToolbarTitle:x["a"]});a("caad"),a("d3b7"),a("ac1f"),a("841c");var S=a("8c4f"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("h1",{staticClass:"text-h1 mt-16"},[t._v("Sing-a-song")])])],1),a("v-row",[a("v-col",[t.profiles.loading?a("em",[t._v("Laddar profiler...")]):t._e(),t.profiles.error?a("span",{staticClass:"text-danger"},[t._v("ERROR: "+t._s(t.profiles.error))]):t._e(),t.profiles.items?t._l(t.profiles.items,(function(e){return a("p",{key:e.id},[a("router-link",{attrs:{to:"/profile/"+e.id}},[a("strong",[t._v(t._s(e.user.firstName)+" "+t._s(e.user.lastName)+":")])]),a("br"),t._v(" "+t._s(e.description)+" ")],1)})):t._e()],2)],1)],1)},R=[],L={name:"Home",computed:{profiles:function(){return this.$store.state.profiles.all}},created:function(){this.$store.dispatch("profiles/getAll")}},N=L,E=a("62ad"),A=a("a523"),T=a("0fd9"),$=Object(c["a"])(N,C,R,!1,null,null,null),P=$.exports;d()($,{VCol:E["a"],VContainer:A["a"],VRow:T["a"]});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"login"},[a("v-row",[a("v-col",[a("h1",[t._v("Logga in")])])],1),a("v-row",[a("v-col",{staticClass:"col-6"},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("v-text-field",{attrs:{label:"Email",outlined:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{label:"Lösenord",type:"password",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-btn",{attrs:{disabled:t.loggingIn},on:{click:t.handleSubmit}},[t._v("Logga in")])],1)],1)],1)],1)},U=[],M={name:"Login",data:function(){return{email:"",password:"",submitted:!1}},computed:{loggingIn:function(){return this.$store.state.authentication.status.loggingIn}},created:function(){this.$store.dispatch("authentication/logout")},methods:{handleSubmit:function(){this.submitted=!0;var t=this.email,e=this.password,a=this.$store.dispatch;t&&e&&a("authentication/login",{email:t,password:e})}}},j=M,I=a("4bd4"),F=a("8654"),J=Object(c["a"])(j,O,U,!1,null,null,null),D=J.exports;d()(J,{VBtn:m["a"],VCol:E["a"],VContainer:A["a"],VForm:I["a"],VRow:T["a"],VTextField:F["a"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("h1",[t._v("Registrera dig")])])],1),a("v-row",[a("v-col",{staticClass:"col-6"},[t.success?a("div",[t._v(" Kolla din email ")]):a("v-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("v-text-field",{attrs:{outlined:"",label:"Förnamn"},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),a("v-text-field",{attrs:{outlined:"",label:"Efternamn"},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),a("v-text-field",{attrs:{outlined:"",label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{outlined:"",label:"Lösenord",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{outlined:"",label:"Lösenord igen",type:"password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),a("v-checkbox",{attrs:{label:"Genom att kryssa i godkänner du våra användarvilkor"},model:{value:t.acceptTerms,callback:function(e){t.acceptTerms=e},expression:"acceptTerms"}}),a("v-btn",{attrs:{disabled:t.submitted},on:{click:t.handleSubmit}},[t._v("Skapa konto")])],1)],1)],1)],1)},B=[],H={name:"Register",data:function(){return{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1,submitted:!1,success:!1}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.firstName,a=this.lastName,r=this.email,i=this.password,o=this.confirmPassword,n=this.acceptTerms,s=this.$store.dispatch;s("authentication/register",{firstName:e,lastName:a,email:r,password:i,confirmPassword:o,acceptTerms:n}).then((function(){t.success=!0}))}}},G=H,z=a("ac7c"),K=Object(c["a"])(G,q,B,!1,null,null,null),X=K.exports;d()(K,{VBtn:m["a"],VCheckbox:z["a"],VCol:E["a"],VContainer:A["a"],VForm:I["a"],VRow:T["a"],VTextField:F["a"]});var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("v-tabs",{staticClass:"mb-16",attrs:{color:"primary"}},[a("v-tab",{attrs:{to:"/account/account"}},[t._v("Ditt konto")]),a("v-tab",{attrs:{to:"/account/profile"}},[t._v("Din profil")]),a("v-tab",{attrs:{to:"/account/media"}},[t._v("Din media")])],1)],1)],1),a("v-tabs-items",{model:{value:t.$route.params.tab,callback:function(e){t.$set(t.$route.params,"tab",e)},expression:"$route.params.tab"}},[a("v-tab-item",{attrs:{value:"account"}},[a("v-row",[a("v-col",{staticClass:"col-6 pb-4"},[a("h2",{staticClass:"text-h2"},[t._v("Ditt konto")]),a("p",{staticClass:"mt-4 text--disabled text-body-2"},[t._v("Gick med "+t._s(t.user.created))]),a("h3",{staticClass:"text-h3 mt-8"},[t._v("Kontoinformation")]),a("v-form",{on:{submit:function(e){return e.preventDefault(),t.updateAccount(e)}}},[a("v-text-field",{attrs:{label:"Förnamn"},model:{value:t.user.firstName,callback:function(e){t.$set(t.user,"firstName",e)},expression:"user.firstName"}}),a("v-text-field",{attrs:{label:"Efternamn"},model:{value:t.user.lastName,callback:function(e){t.$set(t.user,"lastName",e)},expression:"user.lastName"}}),a("v-text-field",{attrs:{label:"Email"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-alert",{staticClass:"elevation-2",attrs:{type:"error",value:!!t.accountValidationError,transition:"scale-transition"}},[t._v(t._s(t.accountValidationError))]),a("v-btn",{attrs:{disabled:t.submitted},on:{click:t.updateAccount}},[t._v("Uppdatera konto")])],1),a("h3",{staticClass:"text-h3 mt-8"},[t._v("Ändra lösenord")]),a("v-form",[a("v-text-field",{attrs:{label:"Lösenord",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{label:"Lösenord igen",type:"password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),a("v-alert",{staticClass:"elevation-2",attrs:{type:"error",value:!!t.passwordValidationError,transition:"scale-transition"}},[t._v(t._s(t.passwordValidationError))]),a("v-btn",{attrs:{disabled:t.submitted},on:{click:t.updatePassword}},[t._v("Uppdatera lösenord")])],1)],1)],1)],1),a("v-tab-item",{attrs:{value:"profile"}},[t.profile.coverURL?a("v-row",[a("v-col",{staticClass:"pa-0"},[a("v-parallax",{staticClass:"ma-1 mt-4 rounded",attrs:{height:"250",src:t.profile.coverURL}},[a("v-row",{attrs:{align:"start",justify:"end"}},[a("v-col",{staticClass:"pt-7",attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"primary",to:"/account/profile"}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)],1)],1)],1):t._e(),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"col-3 text-center"},[a("v-avatar",{staticClass:"elevation-5",class:{"mt-n16":!!t.profile.coverURL,"mt-4":!t.profile.coverURL},attrs:{size:t.profile.coverURL?128:64,color:"accent darken-1"}},[t.profile.avatarURL?a("img",{attrs:{src:t.profile.avatarURL,alt:t.profile.stageName}}):a("span",{staticClass:"white--text text-h5"},[t._v(" "+t._s(t.profile.stageName.slice(0,2))+" ")])])],1)],1),a("v-row",[a("v-col",{staticClass:"col-8 pb-4"},[a("h2",{staticClass:"text-h2"},[t._v("Din profil")]),t.profile?[a("v-file-input",{attrs:{"show-size":"","truncate-length":"15",label:"Ladda upp ny profilbild",accept:"image/*"},model:{value:t.avatarFile,callback:function(e){t.avatarFile=e},expression:"avatarFile"}}),a("v-file-input",{attrs:{"show-size":"","truncate-length":"15",label:"Ladda upp ny omslagsbild",accept:"image/*"},model:{value:t.coverFile,callback:function(e){t.coverFile=e},expression:"coverFile"}}),a("v-text-field",{attrs:{label:"Artistnamn"},model:{value:t.profile.stageName,callback:function(e){t.$set(t.profile,"stageName",e)},expression:"profile.stageName"}}),a("v-textarea",{attrs:{label:"Beskrivning",hint:"Visas på din profil","auto-grow":"",rows:"3"},model:{value:t.profile.description,callback:function(e){t.$set(t.profile,"description",e)},expression:"profile.description"}}),a("v-combobox",{attrs:{items:t.areas,label:"Vilka regioner kan du uppträda i?",multiple:"",chips:""},model:{value:t.profile.geoReach,callback:function(e){t.$set(t.profile,"geoReach",e)},expression:"profile.geoReach"}}),a("v-textarea",{attrs:{label:"Kontaktuppgifter",hint:"E-postadresser kommer förvandlas till länkar.","auto-grow":"",rows:"3"},model:{value:t.profile.contactDetails,callback:function(e){t.$set(t.profile,"contactDetails",e)},expression:"profile.contactDetails"}}),a("v-alert",{staticClass:"elevation-2",attrs:{type:"error",value:!!t.profileValidationError,transition:"scale-transition"}},[t._v(t._s(t.profileValidationError))]),a("v-btn",{staticClass:"mb-4",attrs:{disabled:t.submitted},on:{click:t.updateProfile}},[t._v("Uppdatera konto")]),a("p",[a("router-link",{attrs:{to:"/profile/"+t.profile.id}},[t._v("Besök din profil")])],1)]:[a("p",[t._v("Laddar profil...")])]],2)],1)],1),a("v-tab-item",{attrs:{value:"media"}},[a("v-row",[a("v-col",[a("h2",{staticClass:"text-h2 mb-4"},[t._v("Din media")])])],1),a("v-row",[a("v-col",[a("v-card",{staticClass:"pa-4 elevation-4"},[a("v-text-field",{attrs:{label:"Lägg till media",hint:"Klistra in länken till din media här",color:"success"},model:{value:t.newMediaURL,callback:function(e){t.newMediaURL=e},expression:"newMediaURL"}}),a("v-btn",{attrs:{disabled:!t.newMediaValidation,color:"primary"},on:{click:t.addNewMedia}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Lägg till ")],1),t.newMediaValidation?a("v-alert",{staticClass:"mt-2",attrs:{type:"success",transition:"scale-transition",outlined:""}},[t._v(" Länken är en "),a("strong",[t._v(t._s(t.newMediaValidation.provider)+" "+t._s(t.newMediaValidation.mediaType||t.newMediaValidation.type))]),t._v(". ")]):t._e(),a("v-alert",{staticClass:"elevation-2",attrs:{type:"error",value:!!t.mediaValidationError,transition:"scale-transition"}},[t._v(" "+t._s(t.mediaValidationError)+" ")])],1)],1)],1),a("v-row",{attrs:{dense:""}},t._l(t.profile.media,(function(e){return a("v-col",{key:e.id,staticClass:"d-flex child-flex col-12 col-sm-6 col-md-4",staticStyle:{position:"relative"}},[a("v-btn",{staticStyle:{top:"0px",right:"0px"},attrs:{elevation:"2",fab:"",dark:"",color:"primary",absolute:"",small:""},on:{click:function(a){return t.deleteMedia(e)}}},[a("v-icon",[t._v("mdi-delete")])],1),a("media-card",{attrs:{media:e}})],1)})),1)],1)],1)],1)},W=[];a("99af"),a("7db0"),a("b0c0");function Y(){var t=JSON.parse(localStorage.getItem("user"));return t&&t.jwtToken?{"Content-Type":"application/json",Authorization:"Bearer "+t.jwtToken}:{}}var Z="",tt={authHeader:Y,apiUrl:Z},et=a("8b94"),at=a.n(et),rt=a("f596"),it=a.n(rt),ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mediaCard"},[a("v-responsive",{attrs:{"aspect-ratio":1}},["youtube"===t.media.provider?a("iframe",{attrs:{width:"480",height:"480",src:"https://www.youtube.com/embed/"+t.media.value+"?color=white",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e(),"spotify"===t.media.provider?a("iframe",{attrs:{src:"https://open.spotify.com/embed/"+t.media.type+"/"+t.media.value,width:"300",height:"380",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}}):t._e()])],1)},nt=[],st={name:"MediaCard",props:["media"]},lt=st,ct=(a("2b63"),a("b0af")),ut=a("6b53"),dt=Object(c["a"])(lt,ot,nt,!1,null,null,null),ft=dt.exports;d()(dt,{VCard:ct["a"],VResponsive:ut["a"]});var pt={name:"Account",components:{MediaCard:ft},data:function(){return{submitted:!1,areas:["Götaland","Svealand","Södra Norrland","Norra Norrland"],password:"",confirmPassword:"",passwordValidationError:null,accountValidationError:null,profileValidationError:null,mediaValidationError:null,newMediaURL:void 0,avatarFile:void 0,coverFile:void 0}},computed:{user:{get:function(){return this.$store.state.authentication.user},set:function(){}},profile:function(){var t=this;return!!this.$store.state.profiles.all.items&&this.$store.state.profiles.all.items.find((function(e){return e.userId===t.user.id}))},newMediaValidation:function(){return this.newMediaURL?-1!==this.newMediaURL.search("spotify")?Object.assign(at.a.parse(this.newMediaURL),{provider:"spotify"}):it.a.parse(this.newMediaURL):void 0}},created:function(){this.$store.dispatch("profiles/getAll")},watch:{avatarFile:function(t){if(!t)return!1;this.updateImage(t,"avatar")},coverFile:function(t){if(!t)return!1;this.updateImage(t,"cover")}},methods:{updateAccount:function(){var t=this;this.accountValidationError=null,this.submitted=!0,this.$store.dispatch("authentication/update",this.user).then((function(){t.submitted=!1}),(function(e){t.accountValidationError=e,t.submitted=!1}))},updatePassword:function(){var t=this;this.passwordValidationError=null,this.submitted=!0,this.$store.dispatch("authentication/update",{id:this.user.id,password:this.password,confirmPassword:this.confirmPassword}).then((function(){t.submitted=!1}),(function(e){t.passwordValidationError=e,t.submitted=!1}))},updateProfile:function(){var t=this;this.profileValidationError=null,this.submitted=!0,this.$store.dispatch("profiles/update",this.profile).then((function(){t.submitted=!1}),(function(e){t.profileValidationError=e,t.submitted=!1}))},updateImage:function(t,e){var a=this;function r(t,r,i){var o=new XMLHttpRequest;o.open("PUT",r),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t={id:a.profile.id,userId:a.user.id};"avatar"===e?t.avatarURL=i:"cover"===e?t.coverURL=i:console.error("missing target"),a.$store.dispatch("profiles/update",t).then((function(t){a.$store.commit("profiles/update",t)}))}else console.error("Could not upload file.")},o.send(t)}var i=new XMLHttpRequest;i.open("GET","".concat(tt.apiUrl,"/sign-s3?file-name=").concat(t.name,"&file-type=").concat(t.type)),i.setRequestHeader("Authorization",tt.authHeader().Authorization),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var e=JSON.parse(i.responseText);r(t,e.signedRequest,e.url)}else console.error("Could not get signed URL.")},i.send()},addNewMedia:function(){var t=this;if(!this.newMediaValidation)return!1;this.mediaValidationError=void 0,this.submitted=!0,this.$store.dispatch("media/add",{newMediaURL:this.newMediaURL,profileId:this.profile.id}).then((function(e){t.submitted=!1,t.newMediaURL="",t.$store.commit("profiles/addMedia",e)}),(function(e){t.submitted=!1,t.mediaValidationError=e}))},deleteMedia:function(t){var e=this;this.$store.dispatch("media/remove",t).then((function(){e.$store.commit("profiles/deleteMedia",t)}),(function(t){console.log(t)}))}}},mt=pt,vt=a("0798"),ht=a("8212"),gt=a("2b5d"),bt=a("23a7"),wt=a("8b9c"),_t=a("71a3"),yt=a("c671"),xt=a("fe57"),Vt=a("aac8"),kt=a("a844"),St=Object(c["a"])(mt,Q,W,!1,null,null,null),Ct=St.exports;d()(St,{VAlert:vt["a"],VAvatar:ht["a"],VBtn:m["a"],VCard:ct["a"],VCol:E["a"],VCombobox:gt["a"],VContainer:A["a"],VFileInput:bt["a"],VForm:I["a"],VIcon:v["a"],VParallax:wt["a"],VRow:T["a"],VTab:_t["a"],VTabItem:yt["a"],VTabs:xt["a"],VTabsItems:Vt["a"],VTextField:F["a"],VTextarea:kt["a"]});var Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pb-16"},[t.profile?[t.profile.coverURL?a("v-row",[a("v-col",{staticClass:"pa-0"},[a("v-parallax",{staticClass:"ma-1 mt-4 rounded",attrs:{height:"250",src:t.profile.coverURL}},[t.showEdit?a("v-row",{attrs:{align:"start",justify:"end"}},[a("v-col",{staticClass:"pt-7",attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"primary",to:"/account/profile"}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-pen")]),t._v(" Redigera profil ")],1)],1)],1):t._e()],1)],1)],1):t._e(),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"col-3 text-center"},[a("v-avatar",{staticClass:"elevation-5",class:{"mt-n16":!!t.profile.coverURL,"mt-4":!t.profile.coverURL},attrs:{size:t.profile.coverURL?128:64,color:"accent darken-1"}},[t.profile.avatarURL?a("img",{attrs:{src:t.profile.avatarURL,alt:t.profile.stageName||t.userName}}):a("span",{staticClass:"white--text text-h5"},[t._v(" "+t._s(t.profile.stageName.slice(0,2))+" ")])])],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"text-center col-8"},[a("h1",{staticClass:"text-h3 mb-4"},[t._v(t._s(t.profile.stageName||t.userName))]),a("p",[t._v(t._s(t.profile.description))]),a("p",[a("strong",{staticClass:"accent--text"},[t._v("Kontakt:")]),t._v(" "+t._s(t.profile.contactDetails||"Inga kontaktuppgifter finns"))])])],1),a("v-row",t._l(t.profile.media,(function(t){return a("v-col",{key:t.id,staticClass:"d-flex child-flex pa-1 col-12 col-sm-6 col-md-4"},[a("media-card",{attrs:{media:t}})],1)})),1)]:a("v-row",[a("v-col",[a("h1",{staticClass:"text-h1 mt-16"},[t._v("Laddar")])])],1)],2)},Lt=[],Nt={name:"Profile",components:{MediaCard:ft},data:function(){return{profileMock:{name:"Salty Beans",regions:["Götaland","Svealand"]}}},created:function(){this.$store.dispatch("profiles/getAll")},computed:{id:function(){return this.$route.params.id},profile:function(){var t=this;if(this.$store.state.profiles.all.items)return this.$store.state.profiles.all.items.find((function(e){return e.id==t.id}))},userName:function(){return this.profile.user.firstName+" "+this.profile.user.lastName},showEdit:function(){return!!this.$store.state.authentication.user&&this.profile.userId===this.$store.state.authentication.user.id}}},Et=Nt,At=Object(c["a"])(Et,Rt,Lt,!1,null,null,null),Tt=At.exports;d()(At,{VAvatar:ht["a"],VBtn:m["a"],VCol:E["a"],VContainer:A["a"],VIcon:v["a"],VParallax:wt["a"],VRow:T["a"]}),r["a"].use(S["a"]);var $t=[{path:"/",name:"Home",component:P},{path:"/login",name:"Login",component:D},{path:"/register",name:"Register",component:X},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/account/:tab",name:"Account",component:Ct},{alias:"/account",path:"/account/account",component:Ct},{path:"/profile/:id",name:"Profile",component:Tt}],Pt=new S["a"]({routes:$t});Pt.beforeEach((function(t,e,a){var r=["/","/register","/about","/login"],i=!r.includes(t.path)&&-1===t.path.search("profile"),o=localStorage.getItem("user");if(i&&!o)return a("/login");a()}));var Ot=Pt,Ut=a("2f62"),Mt=tt.authHeader,jt=tt.apiUrl,It={login:Ft,logout:Jt,register:Dt,update:qt,getAll:Bt};function Ft(t,e){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})};return fetch("".concat(jt,"/users/authenticate"),a).then(Ht).then((function(t){return t.jwtToken&&localStorage.setItem("user",JSON.stringify(t)),t}))}function Jt(){localStorage.removeItem("user")}function Dt(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("".concat(jt,"/users/register"),e).then(Ht)}function qt(t){var e={method:"PUT",headers:Mt(),body:JSON.stringify(t)};return fetch("".concat(jt,"/users/").concat(t.id),e).then(Ht).then((function(t){var e=JSON.parse(localStorage.getItem("user"));Object.assign(e,t),localStorage.setItem("user",JSON.stringify(e))}))}function Bt(){var t={method:"GET",headers:Mt()};return fetch("".concat(jt,"/users"),t).then(Ht)}function Ht(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(Jt(),location.reload(!0));var r=a&&a.message||t.statusText;return Promise.reject(r)}return a}))}var Gt=tt.authHeader,zt=tt.apiUrl,Kt={getAll:Xt,update:Qt};function Xt(){var t={method:"GET",headers:Gt()};return fetch("".concat(zt,"/profiles"),t).then(Wt)}function Qt(t){var e={method:"PUT",headers:Gt(),body:JSON.stringify(t)};return fetch("".concat(zt,"/profiles/").concat(t.id),e).then(Wt)}function Wt(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(It.logout(),location.reload(!0));var r=a&&a.message||t.statusText;return Promise.reject(r)}return a}))}var Yt=tt.authHeader,Zt=tt.apiUrl,te={getAll:ee,create:ae,update:re,remove:ie};function ee(){var t={method:"GET",headers:Yt()};return fetch("".concat(Zt,"/media"),t).then(oe)}function ae(t){var e={method:"POST",headers:Yt(),body:JSON.stringify(t)};return fetch("".concat(Zt,"/media/"),e).then(oe)}function re(t){var e={method:"PUT",headers:Yt(),body:JSON.stringify(t)};return fetch("".concat(Zt,"/media/").concat(t.id),e).then(oe)}function ie(t){var e={method:"DELETE",headers:Yt(),body:JSON.stringify(t)};return fetch("".concat(Zt,"/media/").concat(t.id),e).then(oe)}function oe(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(It.logout(),location.reload(!0));var r=a&&a.message||t.statusText;return Promise.reject(r)}return a}))}var ne={userService:It,profileService:Kt,mediaService:te},se=JSON.parse(localStorage.getItem("user")),le=se?{status:{loggedIn:!0},user:se}:{status:{},user:null},ce={namespaced:!0,state:le,actions:{login:function(t,e){var a=t.dispatch,r=t.commit,i=e.email,o=e.password;r("loginRequest",{email:i}),ne.userService.login(i,o).then((function(t){r("loginSuccess",t),Ot.push("/")}),(function(t){r("loginFailure",t),a("alert/error",t,{root:!0})}))},logout:function(t){var e=t.commit;ne.userService.logout(),e("logout")},register:function(t,e){return new Promise((function(t,a){ne.userService.register(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))},update:function(t,e){return new Promise((function(t,a){ne.userService.update(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))}},mutations:{loginRequest:function(t,e){t.status={loggingIn:!0},t.user=e},loginSuccess:function(t,e){t.status={loggedIn:!0},t.user=e},loginFailure:function(t){t.status={},t.user=null},logout:function(t){t.status={},t.user=null}}},ue={namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit;e("getAllRequest"),ne.userService.getAll().then((function(t){return e("getAllSuccess",t)}),(function(t){return e("getAllFailure",t)}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}}}},de=(a("c740"),a("a434"),{namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit;e("getAllRequest"),ne.profileService.getAll().then((function(t){return e("getAllSuccess",t)}),(function(t){return e("getAllFailure",t)}))},update:function(t,e){return new Promise((function(t,a){ne.profileService.update(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}},addMedia:function(t,e){t.all.items.find((function(t){return t.id===e.profileId})).media.unshift(e)},update:function(t,e){var a=t.all.items.findIndex((function(t){return t.id===e.profileId}));t.all.items.splice(a,1,e)},deleteMedia:function(t,e){var a=t.all.items.find((function(t){return t.id===e.profileId})),r=a.media.findIndex((function(t){return t.id===e.id}));a.media.splice(r,1)}}}),fe={namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit;e("getAllRequest"),ne.mediaService.getAll().then((function(t){return e("getAllSuccess",t)}),(function(t){return e("getAllFailure",t)}))},add:function(t,e){var a=e.newMediaURL,r=e.profileId,i={};return-1!==a.search("spotify")?i=Object.assign(at.a.parse(a),{provider:"spotify",url:a}):(i=Object.assign(it.a.parse(a),{url:a}),i.type=i.mediaType),i.value=i.id,i.profileId=r,new Promise((function(t,e){ne.mediaService.create(i).then((function(e){t(e)}),(function(t){console.error({error:t}),e(t)}))}))},update:function(t,e){return new Promise((function(t,a){ne.mediaService.update(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))},remove:function(t,e){return new Promise((function(t,a){ne.mediaService.remove(e).then((function(e){t(e)}),(function(t){console.error({error:t}),a(t)}))}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}}}};r["a"].use(Ut["a"]);var pe=new Ut["a"].Store({modules:{authentication:ce,users:ue,profiles:de,media:fe}}),me=a("f309"),ve=a("c1f1"),he=a("fcf4");r["a"].use(me["a"]);var ge=new me["a"]({lang:{locales:{sv:ve["a"]},current:"sv"},theme:{themes:{light:{primary:he["a"].deepOrange.base,secondary:he["a"].blueGrey.lighten4,accent:he["a"].cyan.base}}}});r["a"].use(i["a"]),r["a"].config.productionTip=!1,new r["a"]({router:Ot,store:pe,vuetify:ge,render:function(t){return t(k)}}).$mount("#app")},6102:function(t,e,a){}});
//# sourceMappingURL=app.19e38a77.js.map