(function(t){function e(e){for(var i,r,s=e[0],l=e[1],c=e[2],d=0,u=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);p&&p(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var s=a[r];0!==o[s]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},r={app:0},o={app:0},n=[];function s(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"717864c6"}[t]+".js"}function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={about:1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,a){for(var i="css/"+({about:"about"}[t]||t)+"."+{about:"c6aa1f4e"}[t]+".css",o=l.p+i,n=document.getElementsByTagName("link"),s=0;s<n.length;s++){var c=n[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===i||d===o))return e()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){c=u[s],d=c.getAttribute("data-href");if(d===i||d===o)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var i=e&&e.target&&e.target.src||o,n=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=i,delete r[t],p.parentNode.removeChild(p),a(n)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){r[t]=0})));var i=o[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,a){i=o[t]=[e,a]}));e.push(i[2]=n);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(p);var a=o[t];if(0!==a){if(a){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",u.name="ChunkLoadError",u.type=i,u.request=r,a[1](u)}o[t]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=d;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},"2a37":function(t,e,a){"use strict";a("5ccf")},"2b63":function(t,e,a){"use strict";a("6102")},"32a5":function(t,e,a){},4510:function(t,e,a){},"4d0e":function(t,e,a){"use strict";a("4510")},"55cb":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=a("28dd"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{app:""}},[a("server-comunication-indicator"),a("app-bar"),a("v-main",[a("router-view")],1),a("v-container",{staticClass:"text-center mb-8 text-body-2"},[a("footer",[t._v(" Singasong.nu drivs av Riksförbundet Visan i Sverige. "),a("router-link",{attrs:{to:"/about"}},[t._v("Läs mer om oss här")]),t._v(" | "),a("router-link",{attrs:{to:"/tos"}},[t._v("Användarvillkor")]),t._v(" | "),a("a",{attrs:{href:"https://docs.google.com/forms/d/e/1FAIpQLScqmyKOihgnDy50mbP905EvWg7cxTcToAl9DLQNfuA-Nr5xlA/viewform?usp=sf_link",target:"_blank"}},[t._v("Lämna feedback")])],1)])],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.$store.state.loading.length?a("div",{staticClass:"ServerComunicationIndicator"},[a("v-progress-linear",{attrs:{indeterminate:"",color:"accent"}})],1):t._e()},l=[],c={name:"ServerComunicationIndicator"},d=c,u=(a("acbd"),a("2877")),p=a("6544"),f=a.n(p),m=a("8e36"),v=Object(u["a"])(d,s,l,!1,null,"5e6b06f4",null),h=v.exports;f()(v,{VProgressLinear:m["a"]});var g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{app:"",color:"primary",dark:"","inverted-scroll":t.isHidden,"scroll-threshold":"0"}},[a("router-link",{attrs:{to:"/"}},[a("v-avatar",{staticClass:"mr-4",attrs:{size:"32"}},[a("svg",{staticClass:"appbar-logo",attrs:{version:"1.1",id:"Lager_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512"}},[a("g",[a("path",{staticClass:"st0",attrs:{d:"M268.4,403.8c-31.5,1.9-62.4-2.7-93.2-8.9c-6.4-1.3-11-0.1-16.1,3.7c-22.8,16.7-44.9,34.1-65,54.1 c-2.6,2.6-5.6,5.3-8.8,6.9c-7.6,3.7-14.3-0.7-14.5-9.1c-0.1-6.3,0.9-12.8,3.9-18.1c11-19.2,10.5-39.8,8.4-60.6 c-0.7-7.4-4.8-12-11.8-16.1c-19.7-11.2-38.4-24.1-51.7-43.1c-4.7-6.7-7.6-15-9.8-22.3c-4.1-13.3-8.2-26.9-9.5-41.2 c-1.5-16.7,1.6-32.2,5.5-48.1c6-24.2,21.1-42.3,38-59.3c5.8-5.9,11.5-12.1,17.2-18c7.9-8.2,17.4-15.1,26.8-21.7 c10.4-7.3,21.3-13.9,32.4-20.2c22.9-13,47.7-20.5,73.6-25.3c48.9-9.1,97.2-6.6,145.1,5.4c27.6,6.9,54.3,16.6,79.9,29.2 c29.1,14.3,50.5,36.1,65.9,64.2c8.2,15,15.5,30.3,22,46.1c1.6,3.8,2.5,8,3.1,12.1c5.1,32.2,0.7,63.7-12,93.2 c-14.7,34.1-42,55.3-76.1,69.6c-38.1,16.1-77.9,22.8-118.4,27.3C291.9,404.9,280.1,403.8,268.4,403.8z M298.8,199.6 c0-22.5,0.3-45-0.1-67.5c-0.2-10.2-4-12.7-14.6-12.3c-9,0.3-10.2,1.9-10.4,12.8c0,3.7,0,7.5,0.1,11.2c1.5,35.8-0.9,71.6-0.9,107.5 c0,9.2-0.6,9.7-9,7.3c-18.6-5.2-35.6-1.8-50.9,9.5c-20.5,15-18.6,30.5-2.1,45.3c1.8,1.6,4.1,2.8,6.3,4.1 c16.3,9.6,33.4,8.5,50.8,4.2c18.3-4.5,26.1-19.4,30.3-35c3.4-12.6,4.1-26.4,2.9-39.7C299.8,231.2,300.6,215.4,298.8,199.6z"}})])])])],1),a("v-toolbar-title",[a("router-link",{staticClass:"secondary--text text-decoration-none",attrs:{to:"/"}},[t._v("Sing a song")])],1),a("v-spacer"),a("top-navigation")],1)},b=[],w=(a("c975"),a("b0c0"),{name:"AppBar",data:function(){return{hiddenOn:["Home","Profile","Profile Edit"]}},computed:{isHidden:function(){return-1!==this.hiddenOn.indexOf(this.$route.name)}}}),_=w,y=(a("4d0e"),a("40dc")),x=a("8212"),k=a("2fa4"),S=a("2a7f"),C=Object(u["a"])(_,g,b,!1,null,"26d5ab88",null),V=C.exports;f()(C,{VAppBar:y["a"],VAvatar:x["a"],VSpacer:k["a"],VToolbarTitle:S["a"]});var L={name:"App",components:{AppBar:V,ServerComunicationIndicator:h}},T=L,P=a("7496"),A=a("a523"),N=a("f6c4"),R=Object(u["a"])(T,o,n,!1,null,null,null),$=R.exports;f()(R,{VApp:P["a"],VContainer:A["a"],VMain:N["a"]});a("d3b7"),a("ac1f"),a("466d"),a("841c");var I=a("8c4f"),O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-parallax",{staticClass:"px-3",attrs:{src:a("7e33")}},[i("v-toolbar",{staticClass:"flex-grow-0",attrs:{flat:"",color:"transparent",dark:""}},[i("router-link",{attrs:{to:"/"}},[i("v-avatar",{staticClass:"mr-4",attrs:{size:"32"}},[i("svg",{staticClass:"appbar-logo",attrs:{version:"1.1",id:"Lager_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512"}},[i("g",[i("path",{staticClass:"st0",attrs:{d:"M268.4,403.8c-31.5,1.9-62.4-2.7-93.2-8.9c-6.4-1.3-11-0.1-16.1,3.7c-22.8,16.7-44.9,34.1-65,54.1 c-2.6,2.6-5.6,5.3-8.8,6.9c-7.6,3.7-14.3-0.7-14.5-9.1c-0.1-6.3,0.9-12.8,3.9-18.1c11-19.2,10.5-39.8,8.4-60.6 c-0.7-7.4-4.8-12-11.8-16.1c-19.7-11.2-38.4-24.1-51.7-43.1c-4.7-6.7-7.6-15-9.8-22.3c-4.1-13.3-8.2-26.9-9.5-41.2 c-1.5-16.7,1.6-32.2,5.5-48.1c6-24.2,21.1-42.3,38-59.3c5.8-5.9,11.5-12.1,17.2-18c7.9-8.2,17.4-15.1,26.8-21.7 c10.4-7.3,21.3-13.9,32.4-20.2c22.9-13,47.7-20.5,73.6-25.3c48.9-9.1,97.2-6.6,145.1,5.4c27.6,6.9,54.3,16.6,79.9,29.2 c29.1,14.3,50.5,36.1,65.9,64.2c8.2,15,15.5,30.3,22,46.1c1.6,3.8,2.5,8,3.1,12.1c5.1,32.2,0.7,63.7-12,93.2 c-14.7,34.1-42,55.3-76.1,69.6c-38.1,16.1-77.9,22.8-118.4,27.3C291.9,404.9,280.1,403.8,268.4,403.8z M298.8,199.6 c0-22.5,0.3-45-0.1-67.5c-0.2-10.2-4-12.7-14.6-12.3c-9,0.3-10.2,1.9-10.4,12.8c0,3.7,0,7.5,0.1,11.2c1.5,35.8-0.9,71.6-0.9,107.5 c0,9.2-0.6,9.7-9,7.3c-18.6-5.2-35.6-1.8-50.9,9.5c-20.5,15-18.6,30.5-2.1,45.3c1.8,1.6,4.1,2.8,6.3,4.1 c16.3,9.6,33.4,8.5,50.8,4.2c18.3-4.5,26.1-19.4,30.3-35c3.4-12.6,4.1-26.4,2.9-39.7C299.8,231.2,300.6,215.4,298.8,199.6z"}})])])])],1),i("v-spacer"),i("top-navigation")],1),i("v-container",{staticClass:"d-flex align-center flex-grow-1"},[i("v-row",{staticClass:"mb-8",attrs:{justify:"center"}},[i("v-col",{staticClass:"col-12 col-sm-10 col-md-8 col-lg-6 pb-12 text-center"},[i("h1",{staticClass:"text-h4 text-sm-h1 mb-6"},[t._v("Sing a song")]),i("v-text-field",{staticClass:"mb-0",attrs:{placeholder:"Sök vissångare",type:"search",solo:"","prepend-inner-icon":"mdi-magnify"},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}},[t.searchString?i("v-icon",{attrs:{slot:"append",color:"primary"},on:{click:function(e){t.searchString=""}},slot:"append"},[t._v("mdi-close")]):t._e()],1),i("vue-fuse",{staticClass:"d-none",attrs:{"fuse-opts":t.searchOptions,list:t.profilesList,defaultAll:!0,search:t.$route.params.search,placeholder:"Sök artist"},on:{"fuse-results":t.handleResults}}),t._l(t.areaChips,(function(e){return i("v-chip",{key:e,staticClass:"elevation-1 ma-1",attrs:{color:"white",filter:"","input-value":e===t.selectedArea},on:{click:function(a){return t.filterOnArea(e)}}},[t._v(" "+t._s(e)+" ")])})),i("v-expand-x-transition",[t.selectedArea&&-1===t.areaChips.indexOf(t.selectedArea)?i("v-chip",{staticClass:"elevation-1 ma-1",attrs:{color:"white",filter:"","input-value":!0},on:{click:function(e){return t.filterOnArea(t.selectedArea)}}},[t._v(" "+t._s(t.selectedArea)+" ")]):t._e()],1),i("v-menu",{attrs:{"max-height":"256"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,r=e.attrs;return[i("v-chip",t._g(t._b({staticClass:"elevation-1 ma-1",attrs:{color:"white"}},"v-chip",r,!1),a),[t._v(" Fler områden ")])]}}])},[i("v-list",[i("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedArea,callback:function(e){t.selectedArea=e},expression:"selectedArea"}},t._l(t.areas,(function(e){return i("v-list-item",{key:e,attrs:{value:e}},[i("v-list-item-title",[t._v(t._s(e))])],1)})),1)],1)],1)],2)],1)],1)],1),i("v-container",{staticClass:"pb-16"},[t.profiles.loading||t.profiles.error?i("v-row",{staticClass:"text-center"},[i("v-col",[t.profiles.loading?i("p",{staticClass:"text-center text-h4 mt-16"},[t._v(" Laddar profiler… ")]):t._e(),t.profiles.error?i("v-alert",{attrs:{type:"error"}},[t._v(" ERROR: "+t._s(t.profiles.error)+" ")]):t._e()],1)],1):t._e(),t.resultsList?[i("v-row",[i("v-col",[i("p",{staticClass:"text-overline py-2 px-2 ma-0"},[t._v(" "+t._s(t.searchString?'Resultat för "'+t.searchString+'"':"Senast tillagt")+t._s(t.selectedArea?" i "+t.selectedArea:"")+": ")])])],1),t.resultsList.length?i("v-row",{attrs:{dense:""}},t._l(t.resultsList,(function(t){return i("v-col",{key:t.id,staticClass:"col-12 col-sm-6 col-md-4"},[i("media-card-with-footer",{attrs:{media:t}})],1)})),1):i("v-row",[i("v-col",{staticClass:"col-12 text-center text-h4 secondary--text text--darken-2"},[t._v(" Inga träffar ")])],1)]:t._e()],2)],1)},M=[],E=(a("4de4"),a("5db7"),a("4160"),a("d81d"),a("fb6a"),a("73d9"),a("159b"),a("0c1f")),U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mediaCardWithFooter",attrs:{color:"secondary lighten-4"}},[a("v-responsive",{attrs:{"aspect-ratio":4/3}},["youtube"===t.media.provider?a("iframe",{attrs:{width:"480",height:"480",src:"https://www.youtube.com/embed/"+t.media.value+"?color=white",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e(),"spotify"===t.media.provider?a("iframe",{attrs:{src:"https://open.spotify.com/embed/"+t.media.type+"/"+t.media.value,width:"480",height:"480",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}}):t._e(),"vimeo"===t.media.provider?a("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://player.vimeo.com/video/"+t.media.value+"?color=ff9933&byline=0&portrait=0",frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:""}}):t._e(),"soundcloud"===t.media.provider?a("iframe",{attrs:{width:"100%",height:"450",scrolling:"no",rameborder:"no",allow:"autoplay",src:t.media.value}}):t._e()]),a("v-card-actions",[a("v-list-item",{staticClass:"px-2",attrs:{to:"/profile/"+t.profile.id}},[a("v-list-item-avatar",{attrs:{color:"grey darken-3"}},[a("v-img",{staticClass:"elevation-6",attrs:{alt:"",src:t.profile.avatarURL}})],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.profile.stageName))])],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-chevron-right")])],1)],1)],1)],1)],1)},F=[],j=(a("7db0"),{name:"mediaCardWithFooter",props:["media"],computed:{profile:function(){var t=this;if(this.$store.state.profiles.all.items)return this.$store.state.profiles.all.items.find((function(e){return e.id==t.media.profileId}))}}}),D=j,B=(a("d3d5"),a("8336")),z=a("b0af"),H=a("99d9"),J=a("132d"),q=a("adda"),G=a("da13"),K=a("1800"),X=a("8270"),Y=a("5d23"),W=a("6b53"),Q=Object(u["a"])(D,U,F,!1,null,"14ecc070",null),Z=Q.exports;f()(Q,{VBtn:B["a"],VCard:z["a"],VCardActions:H["a"],VIcon:J["a"],VImg:q["a"],VListItem:G["a"],VListItemAction:K["a"],VListItemAvatar:X["a"],VListItemContent:Y["a"],VListItemTitle:Y["b"],VResponsive:W["a"]});var tt=["Stockholm","Göteborg","Malmö","Blekinge","Bohuslän","Dalarna","Dalsland","Gotland","Gästrikland","Halland","Hälsingland","Härjedalen","Jämtland","Lappland","Medelpad","Norrbotten","Närke","Skåne","Småland","Södermanland","Uppland","Värmland","Västerbotten","Västergötland","Västmanlan","Ångermanland","Öland","Östergötland"],et={name:"Home",title:"Sing a Song",components:{VueFuse:E["a"],MediaCardWithFooter:Z},data:function(){return{resultsList:[],searchString:this.$route.params.search,searchOptions:{keys:["stageName",{name:"description",weight:.5},"user.firstName","user.lastName"]},areas:tt,areaChips:["Stockholm","Göteborg","Malmö"],selectedArea:!1}},computed:{profiles:function(){return this.$store.state.profiles.all},profilesList:function(){var t=this;return this.profiles&&this.profiles.items?(this.profiles.items.forEach((function(t){t.media.sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)}))})),this.selectedArea?this.profiles.items.filter((function(e){var a=e.geoReach||[];return-1!==a.indexOf(t.selectedArea)})):this.profiles.items):[]}},created:function(){this.$store.dispatch("profiles/getAll")},watch:{searchString:function(){this.searchString?this.$router.push("/s/"+this.searchString):this.$router.push("/")}},methods:{handleResults:function(t){this.searchString?this.resultsList=t.map((function(t){return t.item})).flatMap((function(t){return t.media.slice(0,3)})):this.resultsList=this.profilesList.flatMap((function(t){return t.media.slice(0,3)})).sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)}))},filterOnArea:function(t){this.selectedArea===t?this.selectedArea=void 0:this.selectedArea=t}}},at=et,it=a("0798"),rt=a("cc20"),ot=a("62ad"),nt=a("0789"),st=a("8860"),lt=a("1baa"),ct=a("e449"),dt=a("8b9c"),ut=a("0fd9"),pt=a("8654"),ft=a("71d9"),mt=Object(u["a"])(at,O,M,!1,null,null,null),vt=mt.exports;f()(mt,{VAlert:it["a"],VAvatar:x["a"],VChip:rt["a"],VCol:ot["a"],VContainer:A["a"],VExpandXTransition:nt["b"],VIcon:J["a"],VList:st["a"],VListItem:G["a"],VListItemGroup:lt["a"],VListItemTitle:Y["b"],VMenu:ct["a"],VParallax:dt["a"],VRow:ut["a"],VSpacer:k["a"],VTextField:pt["a"],VToolbar:ft["a"]});var ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-view",{attrs:{title:"Logga in",alert:this.alert},on:{submitted:t.handleSubmit}},[a("v-text-field",{attrs:{type:"email",label:"Email",outlined:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{label:"Lösenord",type:t.showPassword?"text":"password",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("v-icon",{attrs:{slot:"append",tabindex:"-1"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-btn",{attrs:{color:"primary",disabled:t.loggingIn},on:{click:t.handleSubmit}},[t._v("Logga in")]),t.validationError?a("v-alert",{staticClass:"mt-2",attrs:{type:"error",text:"",transition:"scale-transition"}},[t._v(t._s(t.validationError))]):t._e(),a("p",{staticClass:"mt-8"},[a("router-link",{attrs:{to:"/forgot-password"}},[t._v("Glömt lösenord")]),t._v(" - Om du inte har något konto så "),a("router-link",{attrs:{to:"/register"}},[t._v("skapa ett här")]),t._v(". ")],1)],1)},gt=[],bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"formView"},[t.alert?a("v-alert",{attrs:{type:t.alert.type}},[t._v(" "+t._s(t.alert.message)+" ")]):t._e(),a("v-row",{staticClass:"mt-12",attrs:{justify:"center"}},[a("v-col",{staticClass:"col-12 col-sm-5 col-md-4 col-lg-3 text-center"},[a("h1",{staticClass:"mb-10"},[t._v(t._s(t.title))]),a("v-form",{on:{submit:function(e){return e.preventDefault(),t.$emit("submitted")}}},[t._t("default")],2)],1)],1)],1)},wt=[],_t={props:["alert","title"]},yt=_t,xt=a("4bd4"),kt=Object(u["a"])(yt,bt,wt,!1,null,"899bc77c",null),St=kt.exports;f()(kt,{VAlert:it["a"],VCol:ot["a"],VContainer:A["a"],VForm:xt["a"],VRow:ut["a"]});var Ct={name:"Login",title:"Logga in | Sing a Song",components:{FormView:St},data:function(){return{email:"",password:"",submitted:!1,validationError:!1,showPassword:!1}},computed:{loggingIn:function(){return this.$store.state.authentication.status.loggingIn},loggedIn:function(){return this.$store.state.authentication.status.loggedIn},alert:function(){return"loggedOut"===this.$route.params.status?{type:"warning",message:"Du blev utloggad. Logga in igen."}:"verifiedEmail"===this.$route.params.status?{type:"success",message:"Du är verifierad! Nu kan du logga in."}:"passwordReset"===this.$route.params.status?{type:"success",message:"Nu kan du logga in med ditt nya lösenord."}:void 0}},created:function(){this.$store.dispatch("authentication/logout")},watch:{loggedIn:function(){this.loggedIn&&this.$router.push("/")}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.email,a=this.password,i=this.$store.dispatch;e&&a&&i("authentication/login",{email:e,password:a}).then(null,(function(e){t.validationError=e}))}}},Vt=Ct,Lt=Object(u["a"])(Vt,ht,gt,!1,null,null,null),Tt=Lt.exports;f()(Lt,{VAlert:it["a"],VBtn:B["a"],VIcon:J["a"],VTextField:pt["a"]});var Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-view",{attrs:{title:"Glömt lösenord"},on:{submitted:t.handleSubmit}},[a("v-text-field",{attrs:{label:"Email",outlined:"",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-btn",{attrs:{color:"primary",disabled:t.submitted},on:{click:t.handleSubmit}},[t._v("Skicka nytt lösenord")]),t.success||t.error?a("v-alert",{staticClass:"mt-4",attrs:{color:t.success?"success":"error"}},[t._v(t._s(t.success||t.error))]):t._e()],1)},At=[],Nt={name:"ForgotPassword",title:"Glömt lösenord | Sing a Song",components:{FormView:St},data:function(){return{submitted:!1,email:"",success:!1,error:!1}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.email,a=this.$store.dispatch;e&&a("authentication/forgotPassword",{email:e}).then((function(e){t.success=e.message,t.email="",t.submitted=!1}),(function(e){t.error=e,t.submitted=!1}))}}},Rt=Nt,$t=Object(u["a"])(Rt,Pt,At,!1,null,null,null),It=$t.exports;f()($t,{VAlert:it["a"],VBtn:B["a"],VTextField:pt["a"]});var Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-view",{attrs:{title:"Återställ lösen"},on:{submitted:t.handleSubmit}},[t.tokenStatus?t._e():a("v-alert",{attrs:{type:"info"}},[t._v(" Laddar... ")]),"valid"===t.tokenStatus?[a("v-text-field",{attrs:{label:"Lösenord",type:t.showPassword?"text":"password",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("v-icon",{attrs:{slot:"append",tabindex:"-1"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-text-field",{attrs:{label:"Lösenord igen",type:t.showPassword?"text":"password",outlined:""},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),a("v-btn",{attrs:{color:"primary",disabled:t.submitted},on:{click:t.handleSubmit}},[t._v("Spara nytt lösenord")]),t.success||t.error?a("v-alert",{staticClass:"mt-4",attrs:{color:t.success?"success":"error"}},[t._v(t._s(t.success||t.error))]):t._e()]:t._e(),"invalid"===t.tokenStatus?a("v-alert",{attrs:{type:"error"}},[t._v(" Något gick fel. Försök igen. ")]):t._e()],2)},Mt=[],Et={name:"ResetPassword",title:"Nytt lösenord | Sing a Song",components:{FormView:St},data:function(){return{password:"",confirmPassword:"",submitted:!1,success:!1,error:!1,tokenStatus:void 0,showPassword:!1}},created:function(){var t=this;this.$store.dispatch("authentication/validateResetToken",{token:this.token}).then((function(){t.tokenStatus="valid"}),(function(){t.tokenStatus="invalid"}))},computed:{token:function(){return this.$route.params.token}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.password,a=this.confirmPassword,i=this.token,r=this.$store.dispatch;e&&a&&r("authentication/resetPassword",{password:e,confirmPassword:a,token:i}).then((function(){t.$router.push("/login/passwordReset")}),(function(e){t.error=e,t.submitted=!1}))}}},Ut=Et,Ft=Object(u["a"])(Ut,Ot,Mt,!1,null,null,null),jt=Ft.exports;f()(Ft,{VAlert:it["a"],VBtn:B["a"],VIcon:J["a"],VTextField:pt["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-view",{attrs:{title:"Registrera dig"},on:{submitted:t.handleSubmit}},[t.success?a("div",[a("v-alert",{staticClass:"text-left",attrs:{type:"success"}},[a("strong",[t._v("Registreringen lyckades!")]),a("br"),t._v("Kolla i din e-post för vidare instruktioner.")])],1):a("div",[a("v-text-field",{attrs:{outlined:"",label:"Förnamn"},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),a("v-text-field",{attrs:{outlined:"",label:"Efternamn"},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),a("v-text-field",{attrs:{outlined:"",label:"Email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{label:"Lösenord",type:t.showPassword?"text":"password",outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("v-icon",{attrs:{slot:"append",tabindex:"-1"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-text-field",{attrs:{label:"Lösenord igen",type:t.showPassword?"text":"password",outlined:""},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),a("v-checkbox",{attrs:{label:"Genom att kryssa i godkänner du våra användarvilkor"},model:{value:t.acceptTerms,callback:function(e){t.acceptTerms=e},expression:"acceptTerms"}}),a("v-btn",{attrs:{color:"primary",disabled:t.submitted},on:{click:t.handleSubmit}},[t._v("Skapa konto")]),t.validation?a("v-alert",{staticClass:"mt-2",attrs:{type:"error",text:"",transition:"scale-transition"}},[t._v(t._s(t.validation))]):t._e(),a("p",{staticClass:"mt-8"},[t._v(" Om du redan har ett konto så "),a("router-link",{attrs:{to:"/login"}},[t._v("logga in här")]),t._v(". ")],1)],1)])},Bt=[],zt={name:"Register",title:"Registrera dig | Sing a Song",components:{FormView:St},data:function(){return{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1,submitted:!1,success:!1,showPassword:!1,validation:!1}},methods:{handleSubmit:function(){var t=this;this.submitted=!0;var e=this.firstName,a=this.lastName,i=this.email,r=this.password,o=this.confirmPassword,n=this.acceptTerms,s=this.$store.dispatch;s("authentication/register",{firstName:e,lastName:a,email:i,password:r,confirmPassword:o,acceptTerms:n}).then((function(){t.success=!0}),(function(e){t.validation=e,t.submitted=!1}))}}},Ht=zt,Jt=a("ac7c"),qt=Object(u["a"])(Ht,Dt,Bt,!1,null,null,null),Gt=qt.exports;f()(qt,{VAlert:it["a"],VBtn:B["a"],VCheckbox:Jt["a"],VIcon:J["a"],VTextField:pt["a"]});var Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"mt-12 mb-16",attrs:{justify:"center"}},[a("v-col",{staticClass:"col-12 text-center",staticStyle:{"max-width":"400px"}},[a("h1",{staticClass:"mb-10"},[t._v("Ditt konto")]),a("h2",{staticClass:"text-h4 mt-8"},[t._v("Information")]),a("v-form",{on:{submit:function(e){return e.preventDefault(),t.updateAccount(e)}}},[a("v-text-field",{attrs:{label:"Förnamn"},model:{value:t.user.firstName,callback:function(e){t.$set(t.user,"firstName",e)},expression:"user.firstName"}}),a("v-text-field",{attrs:{label:"Efternamn"},model:{value:t.user.lastName,callback:function(e){t.$set(t.user,"lastName",e)},expression:"user.lastName"}}),a("v-text-field",{attrs:{label:"Email",type:"email"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-btn",{attrs:{disabled:t.submitted},on:{click:t.updateAccount}},[t._v("Uppdatera konto")]),t.validation&&"account"===t.validation.target?a("v-alert",{staticClass:"mt-2",attrs:{type:t.validation.type,text:"",transition:"scale-transition"}},[t._v(t._s(t.validation.message))]):t._e()],1),a("h2",{staticClass:"text-h4 mt-12"},[t._v("Ändra lösenord")]),a("v-form",[a("v-text-field",{attrs:{label:"Lösenord",type:t.showPassword?"text":"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("v-icon",{attrs:{slot:"append",tabindex:"-1"},on:{click:function(e){t.showPassword=!t.showPassword}},slot:"append"},[t._v(" "+t._s(t.showPassword?"mdi-eye-off":"mdi-eye")+" ")])],1),a("v-text-field",{attrs:{label:"Lösenord igen",type:t.showPassword?"text":"password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),a("v-btn",{attrs:{disabled:t.submitted},on:{click:t.updatePassword}},[t._v("Uppdatera lösenord")]),t.validation&&"password"===t.validation.target?a("v-alert",{staticClass:"mt-2",attrs:{type:t.validation.type,text:"",transition:"scale-transition"}},[t._v(t._s(t.validation.message))]):t._e()],1),a("h2",{staticClass:"text-h4 mt-12 mb-4"},[t._v("Farliga grejer")]),a("v-form",[t.askToDeleteUser?a("v-btn",{attrs:{color:"error"},on:{click:t.deleteUser}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-delete")]),t._v(" Är du helt säker? Det går inte att ångra ")],1):a("v-btn",{attrs:{color:"error",outlined:""},on:{click:function(e){t.askToDeleteUser=!0}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-delete")]),t._v(" Radera konto ")],1)],1)],1)],1)],1)},Xt=[],Yt={name:"Account",title:"Ditt konto | Sing a Song",data:function(){return{submitted:!1,password:"",confirmPassword:"",askToDeleteUser:!1,showPassword:!1}},computed:{user:{get:function(){return this.$store.state.authentication.user},set:function(){}}},watch:{askToDeleteUser:function(){var t=this;this.askToDeleteUser&&setTimeout((function(){t.askToDeleteUser=!1}),5e3)},validation:function(){var t=this;this.validation.target&&setTimeout((function(){t.validation={}}),1e4)}},methods:{updateAccount:function(){var t=this;this.validation={},this.submitted=!0,this.$store.dispatch("authentication/update",this.user).then((function(){t.validation={target:"account",message:"Ditt konto sparades",type:"success"},t.submitted=!1}),(function(e){t.validation={target:"account",message:e,type:"error"},t.submitted=!1}))},updatePassword:function(){var t=this;this.validation={},this.submitted=!0,this.$store.dispatch("authentication/update",{id:this.user.id,password:this.password,confirmPassword:this.confirmPassword}).then((function(){t.validation={target:"password",message:"Ditt lösenord uppdaterades",type:"success"},t.submitted=!1}),(function(e){t.validation={target:"password",message:e,type:"error"},t.submitted=!1}))},deleteUser:function(){console.log("delete user:"+this.user.id),this.$store.dispatch("authentication/_delete",this.user.id)}}},Wt=Yt,Qt=(a("90c7"),Object(u["a"])(Wt,Kt,Xt,!1,null,null,null)),Zt=Qt.exports;f()(Qt,{VAlert:it["a"],VBtn:B["a"],VCol:ot["a"],VContainer:A["a"],VForm:xt["a"],VIcon:J["a"],VRow:ut["a"],VTextField:pt["a"]});var te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.profile?[t.profile.coverURL?a("v-parallax",{attrs:{height:"320",src:t.profile.coverURL}},[a("v-toolbar",{staticClass:"flex-grow-1",attrs:{flat:"",color:"transparent",dark:""}},[a("router-link",{attrs:{to:"/"}},[a("v-avatar",{staticClass:"mr-4",attrs:{size:"32"}},[a("svg",{staticClass:"appbar-logo",attrs:{version:"1.1",id:"Lager_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512"}},[a("g",[a("path",{staticClass:"st0",attrs:{d:"M268.4,403.8c-31.5,1.9-62.4-2.7-93.2-8.9c-6.4-1.3-11-0.1-16.1,3.7c-22.8,16.7-44.9,34.1-65,54.1 c-2.6,2.6-5.6,5.3-8.8,6.9c-7.6,3.7-14.3-0.7-14.5-9.1c-0.1-6.3,0.9-12.8,3.9-18.1c11-19.2,10.5-39.8,8.4-60.6 c-0.7-7.4-4.8-12-11.8-16.1c-19.7-11.2-38.4-24.1-51.7-43.1c-4.7-6.7-7.6-15-9.8-22.3c-4.1-13.3-8.2-26.9-9.5-41.2 c-1.5-16.7,1.6-32.2,5.5-48.1c6-24.2,21.1-42.3,38-59.3c5.8-5.9,11.5-12.1,17.2-18c7.9-8.2,17.4-15.1,26.8-21.7 c10.4-7.3,21.3-13.9,32.4-20.2c22.9-13,47.7-20.5,73.6-25.3c48.9-9.1,97.2-6.6,145.1,5.4c27.6,6.9,54.3,16.6,79.9,29.2 c29.1,14.3,50.5,36.1,65.9,64.2c8.2,15,15.5,30.3,22,46.1c1.6,3.8,2.5,8,3.1,12.1c5.1,32.2,0.7,63.7-12,93.2 c-14.7,34.1-42,55.3-76.1,69.6c-38.1,16.1-77.9,22.8-118.4,27.3C291.9,404.9,280.1,403.8,268.4,403.8z M298.8,199.6 c0-22.5,0.3-45-0.1-67.5c-0.2-10.2-4-12.7-14.6-12.3c-9,0.3-10.2,1.9-10.4,12.8c0,3.7,0,7.5,0.1,11.2c1.5,35.8-0.9,71.6-0.9,107.5 c0,9.2-0.6,9.7-9,7.3c-18.6-5.2-35.6-1.8-50.9,9.5c-20.5,15-18.6,30.5-2.1,45.3c1.8,1.6,4.1,2.8,6.3,4.1 c16.3,9.6,33.4,8.5,50.8,4.2c18.3-4.5,26.1-19.4,30.3-35c3.4-12.6,4.1-26.4,2.9-39.7C299.8,231.2,300.6,215.4,298.8,199.6z"}})])])])],1),a("v-toolbar-title",[a("router-link",{staticClass:"secondary--text text-decoration-none",attrs:{to:"/"}},[t._v("Sing a song")])],1),a("v-spacer"),t.showEdit?a("v-btn",{staticClass:"mr-2",attrs:{to:"/profile/"+t.profile.id+"/edit",outlined:""}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-pen ")]),t._v(" Redigera din profil ")],1):t._e(),a("top-navigation")],1)],1):t._e(),t.profile.coverURL?t._e():a("v-toolbar",{attrs:{flat:"",color:"transparent"}},[a("router-link",{attrs:{to:"/"}},[a("v-avatar",{staticClass:"mr-4",attrs:{size:"32"}},[a("svg",{staticClass:"appbar-logo",attrs:{version:"1.1",id:"Lager_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512"}},[a("g",[a("path",{staticClass:"st0",attrs:{d:"M268.4,403.8c-31.5,1.9-62.4-2.7-93.2-8.9c-6.4-1.3-11-0.1-16.1,3.7c-22.8,16.7-44.9,34.1-65,54.1 c-2.6,2.6-5.6,5.3-8.8,6.9c-7.6,3.7-14.3-0.7-14.5-9.1c-0.1-6.3,0.9-12.8,3.9-18.1c11-19.2,10.5-39.8,8.4-60.6 c-0.7-7.4-4.8-12-11.8-16.1c-19.7-11.2-38.4-24.1-51.7-43.1c-4.7-6.7-7.6-15-9.8-22.3c-4.1-13.3-8.2-26.9-9.5-41.2 c-1.5-16.7,1.6-32.2,5.5-48.1c6-24.2,21.1-42.3,38-59.3c5.8-5.9,11.5-12.1,17.2-18c7.9-8.2,17.4-15.1,26.8-21.7 c10.4-7.3,21.3-13.9,32.4-20.2c22.9-13,47.7-20.5,73.6-25.3c48.9-9.1,97.2-6.6,145.1,5.4c27.6,6.9,54.3,16.6,79.9,29.2 c29.1,14.3,50.5,36.1,65.9,64.2c8.2,15,15.5,30.3,22,46.1c1.6,3.8,2.5,8,3.1,12.1c5.1,32.2,0.7,63.7-12,93.2 c-14.7,34.1-42,55.3-76.1,69.6c-38.1,16.1-77.9,22.8-118.4,27.3C291.9,404.9,280.1,403.8,268.4,403.8z M298.8,199.6 c0-22.5,0.3-45-0.1-67.5c-0.2-10.2-4-12.7-14.6-12.3c-9,0.3-10.2,1.9-10.4,12.8c0,3.7,0,7.5,0.1,11.2c1.5,35.8-0.9,71.6-0.9,107.5 c0,9.2-0.6,9.7-9,7.3c-18.6-5.2-35.6-1.8-50.9,9.5c-20.5,15-18.6,30.5-2.1,45.3c1.8,1.6,4.1,2.8,6.3,4.1 c16.3,9.6,33.4,8.5,50.8,4.2c18.3-4.5,26.1-19.4,30.3-35c3.4-12.6,4.1-26.4,2.9-39.7C299.8,231.2,300.6,215.4,298.8,199.6z"}})])])])],1),a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",attrs:{to:"/"}},[t._v("Sing a song")])],1),a("v-spacer"),a("top-navigation")],1)]:t._e(),a("v-container",{staticClass:"pb-16"},[t.profile?[a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"col-3 text-center"},[a("v-avatar",{staticClass:"elevation-5",class:{"mt-n13":!!t.profile.coverURL,"mt-4":!t.profile.coverURL},attrs:{size:t.profile.avatarURL?128:64,color:"accent darken-1"}},[t.profile.avatarURL?a("img",{attrs:{src:t.profile.avatarURL,alt:t.profile.stageName||t.userName}}):a("span",{staticClass:"white--text text-h5"},[t._v(" "+t._s(t.profile.stageName?t.profile.stageName.slice(0,2):t.profile.user.firstName[0]+t.profile.user.lastName[0])+" ")])])],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"text-center col-12 col-sm-8"},[a("h1",{staticClass:"text-h3 mb-4"},[t._v(t._s(t.profileName))]),t.profile.description?a("vue-markdown",[t._v(" "+t._s(t.profile.description)+" ")]):t._e(),a("p",t._l(t.profile.geoReach,(function(e){return a("v-chip",{key:e,staticClass:"ma-1",attrs:{color:"accent"}},[t._v(" "+t._s(e)+" ")])})),1),t.profile.contactDetails?a("vue-markdown",[t._v(" "+t._s(t.profile.contactDetails)+" ")]):a("p",{staticClass:"font-italic text--disabled"},[t._v(" Inga kontaktuppgifter. ")])],1)],1),a("v-row",t._l(t.profile.media,(function(t){return a("v-col",{key:t.id,staticClass:"d-flex child-flex pa-1 col-12 col-sm-6 col-md-4"},[a("media-card",{attrs:{media:t}})],1)})),1)]:a("v-row",[a("v-col",[a("p",{staticClass:"text-center text-h4 mt-16"},[t._v("Laddar…")])])],1)],2)],2)},ee=[],ae=(a("99af"),a("9ce6")),ie=a.n(ae);function re(){var t=JSON.parse(localStorage.getItem("user"));return t&&t.jwtToken?{"Content-Type":"application/json",Authorization:"Bearer "+t.jwtToken}:{}}a("25f0"),a("5319"),a("498a");function oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t?t.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,e):""}var ne="/api",se={authHeader:re,apiUrl:ne,slugify:oe},le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mediaCard",attrs:{color:"secondary darken-4"}},[a("v-responsive",{attrs:{"aspect-ratio":4/3}},["youtube"===t.media.provider?a("iframe",{attrs:{width:"480",height:"480",src:"https://www.youtube.com/embed/"+t.media.value+"?color=white",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e(),"spotify"===t.media.provider?a("iframe",{attrs:{src:"https://open.spotify.com/embed/"+t.media.type+"/"+t.media.value,width:"300",height:"380",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}}):t._e(),"vimeo"===t.media.provider?a("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://player.vimeo.com/video/"+t.media.value+"?color=ff9933&byline=0&portrait=0",frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:""}}):t._e(),"soundcloud"===t.media.provider?a("iframe",{attrs:{width:"100%",height:"450",scrolling:"no",rameborder:"no",allow:"autoplay",src:t.media.value}}):t._e()])],1)},ce=[],de={name:"MediaCard",props:["media"]},ue=de,pe=(a("2b63"),Object(u["a"])(ue,le,ce,!1,null,null,null)),fe=pe.exports;f()(pe,{VCard:z["a"],VResponsive:W["a"]});var me={name:"Profile",title:function(){return"".concat(this.profileName," | Sing a Song")},components:{VueMarkdown:ie.a,MediaCard:fe},data:function(){return{coverFile:void 0,avatarFile:void 0}},created:function(){this.$store.dispatch("profiles/getAll")},watch:{profileSlug:function(){!this.$route.params.slug!==this.profileSlug&&this.$router.push("/profile/".concat(this.id,"/").concat(this.profileSlug))},avatarFile:function(t){if(!t)return!1;this.updateImage(t,"avatar")},coverFile:function(t){if(!t)return!1;this.updateImage(t,"cover")}},computed:{id:function(){return this.$route.params.id},profile:function(){var t=this;if(this.$store.state.profiles.all.items)return this.$store.state.profiles.all.items.find((function(e){return e.id==t.id}))},profileName:function(){if(this.$store.state.profiles.all.items)return this.profile.stageName||this.profile.user.firstName+" "+this.profile.user.lastName},profileSlug:function(){return se.slugify(this.profileName)},userName:function(){return this.profile.user.firstName+" "+this.profile.user.lastName},showEdit:function(){return!!this.$store.state.authentication.user&&this.profile.userId===this.$store.state.authentication.user.id}},methods:{updateImage:function(t,e){var a=this,i=this.$store.state.authentication.user;function r(t,r,o){var n=new XMLHttpRequest;n.open("PUT",r),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var t={id:a.profile.id,userId:i.id};"avatar"===e?t.avatarURL=o:"cover"===e?t.coverURL=o:console.error("missing target"),a.$store.dispatch("profiles/update",t).then((function(t){a.$store.commit("profiles/update",t)}))}else console.error("Could not upload file.")},n.send(t)}var o=new XMLHttpRequest;o.open("GET","".concat(se.apiUrl,"/sign-s3?file-name=").concat(t.name,"&file-type=").concat(t.type)),o.setRequestHeader("Authorization",se.authHeader().Authorization),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=JSON.parse(o.responseText);r(t,e.signedRequest,e.url)}else console.error("Could not get signed URL.")},o.send()},removeImg:function(t){var e=this;console.log("removeImg: "+t);var a={id:this.profile.id,userId:this.$store.state.authentication.user.id};"avatar"===t?a.avatarURL="":"cover"===t?a.coverURL="":console.error("missing target"),this.$store.dispatch("profiles/update",a).then((function(t){e.$store.commit("profiles/update",t)}))}}},ve=me,he=(a("2a37"),Object(u["a"])(ve,te,ee,!1,null,null,null)),ge=he.exports;f()(he,{VAvatar:x["a"],VBtn:B["a"],VChip:rt["a"],VCol:ot["a"],VContainer:A["a"],VIcon:J["a"],VParallax:dt["a"],VRow:ut["a"],VSpacer:k["a"],VToolbar:ft["a"],VToolbarTitle:S["a"]});var be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.profile?[a("v-parallax",{staticClass:"secondary darken-3",attrs:{height:"320",src:t.profile.coverURL}},[a("v-toolbar",{staticClass:"flex-grow-0",attrs:{flat:"",color:"transparent",dark:""}},[a("router-link",{attrs:{to:"/"}},[a("v-avatar",{staticClass:"mr-4",attrs:{size:"32"}},[a("svg",{staticClass:"appbar-logo",attrs:{version:"1.1",id:"Lager_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512"}},[a("g",[a("path",{staticClass:"st0",attrs:{d:"M268.4,403.8c-31.5,1.9-62.4-2.7-93.2-8.9c-6.4-1.3-11-0.1-16.1,3.7c-22.8,16.7-44.9,34.1-65,54.1 c-2.6,2.6-5.6,5.3-8.8,6.9c-7.6,3.7-14.3-0.7-14.5-9.1c-0.1-6.3,0.9-12.8,3.9-18.1c11-19.2,10.5-39.8,8.4-60.6 c-0.7-7.4-4.8-12-11.8-16.1c-19.7-11.2-38.4-24.1-51.7-43.1c-4.7-6.7-7.6-15-9.8-22.3c-4.1-13.3-8.2-26.9-9.5-41.2 c-1.5-16.7,1.6-32.2,5.5-48.1c6-24.2,21.1-42.3,38-59.3c5.8-5.9,11.5-12.1,17.2-18c7.9-8.2,17.4-15.1,26.8-21.7 c10.4-7.3,21.3-13.9,32.4-20.2c22.9-13,47.7-20.5,73.6-25.3c48.9-9.1,97.2-6.6,145.1,5.4c27.6,6.9,54.3,16.6,79.9,29.2 c29.1,14.3,50.5,36.1,65.9,64.2c8.2,15,15.5,30.3,22,46.1c1.6,3.8,2.5,8,3.1,12.1c5.1,32.2,0.7,63.7-12,93.2 c-14.7,34.1-42,55.3-76.1,69.6c-38.1,16.1-77.9,22.8-118.4,27.3C291.9,404.9,280.1,403.8,268.4,403.8z M298.8,199.6 c0-22.5,0.3-45-0.1-67.5c-0.2-10.2-4-12.7-14.6-12.3c-9,0.3-10.2,1.9-10.4,12.8c0,3.7,0,7.5,0.1,11.2c1.5,35.8-0.9,71.6-0.9,107.5 c0,9.2-0.6,9.7-9,7.3c-18.6-5.2-35.6-1.8-50.9,9.5c-20.5,15-18.6,30.5-2.1,45.3c1.8,1.6,4.1,2.8,6.3,4.1 c16.3,9.6,33.4,8.5,50.8,4.2c18.3-4.5,26.1-19.4,30.3-35c3.4-12.6,4.1-26.4,2.9-39.7C299.8,231.2,300.6,215.4,298.8,199.6z"}})])])])],1),a("v-toolbar-title",[a("router-link",{staticClass:"secondary--text text-decoration-none",attrs:{to:"/"}},[t._v("Sing a song")])],1),a("v-spacer"),a("v-btn",{staticClass:"mr-2",attrs:{to:"/profile/"+t.profile.id,outlined:""}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-pen-off ")]),t._v(" Lämna redigering ")],1),a("top-navigation")],1),a("v-container",{staticClass:"flex-grow-1 px-0 d-flex"},[a("v-row",[a("v-col",{staticClass:"d-flex justify-center align-center pb-12",attrs:{cols:"12"}},[a("v-sheet",{staticClass:"px-7 pt-7 text-center",attrs:{color:"white",elevation:"3",rounded:""}},[a("v-file-input",{staticClass:"mb-0 d-inline-flex mr-2",staticStyle:{width:"276px"},attrs:{disabled:t.coverFile,clearable:"",accept:"image/*",outlined:"",placeholder:"Ladda upp ny omslagsbild",dense:""},model:{value:t.coverFile,callback:function(e){t.coverFile=e},expression:"coverFile"}}),t.profile.coverURL?a("v-btn",{staticClass:"mb-3",attrs:{dark:"",color:"accent"},on:{click:function(e){return t.removeImg("cover")}}},[a("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-delete ")]),t._v(" Ta bort omslagsbild ")],1):t._e()],1)],1)],1)],1)],1)]:t._e(),a("v-container",{staticClass:"pb-16"},[t.profile?[a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"text-center"},[a("v-avatar",{staticClass:"elevation-5",class:{"mt-n13":!!t.profile.coverURL,"mt-4":!t.profile.coverURL},attrs:{size:t.profile.avatarURL?128:64,color:"accent darken-1"}},[t.profile.avatarURL?a("img",{attrs:{src:t.profile.avatarURL,alt:t.profile.stageName||t.userName}}):a("span",{staticClass:"white--text text-h5"},[t._v(" "+t._s(t.profile.stageName?t.profile.stageName.slice(0,2):t.profile.user.firstName[0]+t.profile.user.lastName[0])+" ")])])],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"col-12 col-md-8 text-center"},[a("v-file-input",{staticClass:"mb-0 d-inline-flex mr-2",staticStyle:{width:"276px"},attrs:{disabled:t.avatarFile,clearable:"",accept:"image/*",outlined:"",placeholder:"Ladda upp ny profilbild",dense:""},model:{value:t.avatarFile,callback:function(e){t.avatarFile=e},expression:"avatarFile"}}),t.profile.avatarURL?a("v-btn",{staticStyle:{top:"-6px"},attrs:{dark:"",color:"accent"},on:{click:function(e){return t.removeImg("avatar")}}},[a("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-delete ")]),t._v(" Ta bort profilbild ")],1):t._e()],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"col-12 col-sm-8"},[a("v-expand-transition",[t.validation.message?a("v-alert",{staticClass:"text-left",attrs:{type:t.validation.type}},[t._v(" "+t._s(t.validation.message)+" ")]):t._e()],1),a("inline-edit",{attrs:{model:t.profileName,label:"Artistnamn"},on:{save:t.saveProfileName}},[a("h1",{staticClass:"text-center text-h3 mb-4"},[t._v(t._s(t.profileName))])]),a("inline-edit",{staticClass:"mb-3",attrs:{model:t.profile.description,label:"Beskrivning",type:"textarea"},on:{save:t.saveProfileDescription}},[t.profile.description?a("vue-markdown",{staticClass:"pa-3"},[t._v(" "+t._s(t.profile.description)+" ")]):a("p",{staticClass:"font-italic text--disabled"},[t._v(" Klicka här och skriv ett par rader om dig själv ")])],1),a("p",{staticClass:"text-center text-caption mb-0"},[t._v(" Vilka regioner kan du uppträda i? ")]),a("p",{staticClass:"text-center"},[a("span",t._l(t.profile.geoReach,(function(e){return a("v-chip",{key:e,staticClass:"ma-1",attrs:{color:"accent",close:"","close-icon":"mdi-delete"},on:{"click:close":function(a){return t.removeArea(e)}}},[t._v(" "+t._s(e)+" ")])})),1),a("v-menu",{attrs:{"max-height":"256"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-chip",t._g(t._b({staticClass:"ma-1",attrs:{color:"primary",outlined:""}},"v-chip",r,!1),i),[a("v-icon",{attrs:{left:""}},[t._v(" mdi-plus ")]),t._v(" Lägg till område ")],1)]}}],null,!1,2709049685)},[a("v-list",[a("v-list-item-group",{attrs:{color:"primary"}},t._l(t.notSelectedAreas,(function(e){return a("v-list-item",{key:e,on:{click:function(a){return t.addArea(e)}}},[a("v-list-item-title",[t._v(t._s(e))])],1)})),1)],1)],1)],1),a("inline-edit",{attrs:{model:t.profile.contactDetails,label:"Kontaktuppgifter",type:"textarea"},on:{save:t.saveProfileContactDetails}},[t.profile.contactDetails?a("vue-markdown",{staticClass:"pa-3"},[t._v(" "+t._s(t.profile.contactDetails)+" ")]):a("p",{staticClass:"font-italic text--disabled"},[t._v(" Klicka för att ange kontaktuppgifter. ")])],1)],1)],1),a("v-row",[a("v-col",[a("v-alert",{staticClass:"mt-0",attrs:{color:t.newMediaValidation?"success":"info",outlined:"",text:""}},[a("v-text-field",{attrs:{label:"Lägga till media",placeholder:"Klistra in för att lägga till media",color:t.newMediaValidation?"success":"primary",solo:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-btn",{attrs:{disabled:!t.newMediaValidation,color:"primary"},on:{click:t.addNewMedia}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Lägg till ")],1)]},proxy:!0}],null,!1,3221238361),model:{value:t.newMediaURL,callback:function(e){t.newMediaURL=e},expression:"newMediaURL"}}),t.newMediaValidation?t._e():a("v-expansion-panels",{staticClass:"mt-n4",attrs:{flat:"",hover:""}},[a("v-expansion-panel",{staticClass:"blue lighten-4"},[a("v-expansion-panel-header",{attrs:{dark:""}},[a("div",[t._v(" Klistra in en länk från YouTube, Spotify eller Soundcloud. "),a("span",{staticClass:"text-decoration-underline"},[t._v("Läs mer")])])]),a("v-expansion-panel-content",[a("v-tabs",{model:{value:t.helpTab,callback:function(e){t.helpTab=e},expression:"helpTab"}},[a("v-tab",[t._v(" YouTube ")]),a("v-tab",[t._v(" Spotify ")]),a("v-tab",[t._v(" Soundcloud ")]),a("v-tab",[t._v(" Andra källor ")])],1),a("v-card",{attrs:{flat:"",color:"transparent"}},[a("v-tabs-items",{model:{value:t.helpTab,callback:function(e){t.helpTab=e},expression:"helpTab"}},[a("v-tab-item",[a("v-card-text",[a("h6",{staticClass:"text-h6 mb-2"},[t._v("Film från YouTube")]),t._v(" För att lägga till en film från YouTube så klistrar du in webbadressen till filmens YouTube-sida. Den hittar du längst upp i webbläsarfönstret när du tittar på filmen på YouTube. ")])],1),a("v-tab-item",[a("v-card-text",[a("h6",{staticClass:"text-h6 mb-2"},[t._v(" Artist, låt, album eller spellista från Spotify ")]),t._v(" I Spotify kan du vänsterklicka (cmd + klick på Mac) på nästan vad som helst och få fram en meny. Under "),a("em",[t._v("Dela")]),t._v(" väljer du "),a("em",[t._v("Kopiera Spotify-URI")]),t._v(". Sedan klistrar du in här för att lägga till på din profil. ")])],1),a("v-tab-item",[a("v-card-text",[a("h6",{staticClass:"text-h6 mb-2"},[t._v(" Låt eller spellista från Soundcloud ")]),t._v(" På spellistan eller låten i Soundcloud väljer du "),a("em",[t._v("Share")]),t._v(" ("),a("em",[t._v("Dela")]),t._v(") och i rutan som dyker upp väljer du "),a("em",[t._v("Embed")]),t._v(" ("),a("em",[t._v("Bädda in")]),t._v("). Kopiera hela texten i rutan "),a("em",[t._v("Code")]),t._v(" och klistra in här för att lägga till på din profil. ")])],1),a("v-tab-item",[a("v-card-text",[a("h6",{staticClass:"text-h6 mb-2"},[t._v(" Skulle du vilja lägga till annan media? ")]),t._v(" Vi vill alltid veta hur vi kan göra Sing a Song ännu bättre. Skriv dina önskemål till oss. "),a("iframe",{staticClass:"my-4",staticStyle:{width:"100%"},attrs:{src:"https://docs.google.com/forms/d/e/1FAIpQLScqmyKOihgnDy50mbP905EvWg7cxTcToAl9DLQNfuA-Nr5xlA/viewform?embedded=true",width:"640",height:"512",frameborder:"0",marginheight:"0",marginwidth:"0"}},[t._v("Loading…")])])],1)],1)],1)],1)],1)],1),t.newMediaValidation?a("v-alert",{staticClass:"mt-n4 mb-0",attrs:{type:"success"}},[t._v(" Länken är en "),a("strong",[t._v(t._s(t.newMediaValidation.provider)+" "+t._s(t.newMediaValidation.mediaType||t.newMediaValidation.type))]),t._v(". ")]):t._e()],1)],1)],1),a("v-row",{attrs:{dense:""}},t._l(t.profile.media,(function(e){return a("v-col",{key:e.id,staticClass:"d-flex child-flex col-12 col-sm-6 col-md-4",staticStyle:{position:"relative"}},[a("v-btn",{staticStyle:{top:"0px",right:"0px"},attrs:{elevation:"2",fab:"",dark:"",color:"primary",absolute:"",small:""},on:{click:function(a){return t.deleteMedia(e)}}},[a("v-icon",[t._v("mdi-delete")])],1),a("media-card",{attrs:{media:e}})],1)})),1)]:a("v-row",[a("v-col",[a("p",{staticClass:"text-center text-h4 mt-16"},[t._v("Laddar…")])])],1)],2)],2)},we=[],_e=(a("a4d3"),a("e01a"),a("1276"),a("8b94")),ye=a.n(_e),xe=a("f596"),ke=a.n(xe),Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.editMode?t._e():a("v-tooltip",{attrs:{right:"","nudge-right":"-30","open-delay":"700",transition:"scroll-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("div",t._g(t._b({directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"rounded border mb-1",staticStyle:{border:"1px dashed var(--v-secondary-darken1)",cursor:"pointer"},on:{click:function(e){t.editMode=!0}}},"div",r,!1),i),[a("div",{staticClass:"text-caption text-left px-3 mb-1 secondary--text text--darken-4"},[t._v(" "+t._s(t.label)+" ")]),t._t("default")],2)]}}],null,!0)},[a("v-icon",{attrs:{dark:""}},[t._v("mdi-pen")])],1),t.editMode&&"text-field"===t.type?a("v-text-field",{staticClass:"mt-4",attrs:{label:t.label,outlined:""},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSave(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleCancel(e)}]},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-btn",{staticClass:"mr-1",staticStyle:{top:"-7px"},on:{click:t.handleSave}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-check ")]),t._v(" Spara ")],1),a("v-btn",{staticStyle:{top:"-7px"},on:{click:t.handleCancel}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" Ångra ")],1)]},proxy:!0}],null,!1,2802187213),model:{value:t.newModel,callback:function(e){t.newModel=e},expression:"newModel"}}):t._e(),t.editMode&&"textarea"===t.type?[a("v-textarea",{staticClass:"mt-4",attrs:{label:t.label,outlined:""},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleCancel(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.handleSave(e):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.metaKey?t.handleSave(e):null}]},model:{value:t.newModel,callback:function(e){t.newModel=e},expression:"newModel"}}),a("div",{staticClass:"text-right mb-8"},[a("v-btn",{staticClass:"mr-1",staticStyle:{top:"-7px"},on:{click:t.handleSave}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-check ")]),t._v(" Spara ")],1),a("v-btn",{staticStyle:{top:"-7px"},on:{click:t.handleCancel}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" Ångra ")],1)],1)]:t._e()],2)},Ce=[],Ve={name:"InlineEdit",props:{model:String,label:String,type:{type:String,default:"text-field"}},data:function(){return{editMode:!1,newModel:this.model}},watch:{model:function(){this.newModel=this.model}},methods:{handleSave:function(){this.$emit("save",this.newModel),this.editMode=!1},handleCancel:function(){this.$emit("cancel"),this.newModel=this.model,this.editMode=!1}}},Le=Ve,Te=a("a844"),Pe=a("3a2f"),Ae=a("269a"),Ne=a.n(Ae),Re=a("5607"),$e=Object(u["a"])(Le,Se,Ce,!1,null,"22ff9783",null),Ie=$e.exports;f()($e,{VBtn:B["a"],VIcon:J["a"],VTextField:pt["a"],VTextarea:Te["a"],VTooltip:Pe["a"]}),Ne()($e,{Ripple:Re["a"]});var Oe={name:"Profile Edit",title:function(){return"Redigera ".concat(this.profileName," | Sing a Song")},components:{VueMarkdown:ie.a,MediaCard:fe,InlineEdit:Ie},data:function(){return{helpTab:0,newMediaURL:void 0,coverFile:void 0,avatarFile:void 0,validation:{},validationTimeout:void 0}},created:function(){this.$store.dispatch("profiles/getAll")},watch:{profile:function(){this.profile&&this.profile.userId!==this.$store.state.authentication.user.id&&this.$router.push("/")},avatarFile:function(t){if(!t)return!1;this.updateImage(t,"avatar")},coverFile:function(t){if(!t)return!1;this.updateImage(t,"cover")},validation:function(){var t=this;this.validationTimeout&&(clearTimeout(this.validationTimeout),this.validationTimeout=void 0),this.validation.message&&(this.validationTimeout=setTimeout((function(){t.validation={},t.validationTimeout=void 0}),1e4))}},computed:{id:function(){return this.$route.params.id},profile:function(){var t=this;if(this.$store.state.profiles.all.items)return this.$store.state.profiles.all.items.find((function(e){return e.id==t.id}))},profileName:function(){if(this.$store.state.profiles.all.items)return this.profile.stageName||this.userName},profileSlug:function(){return se.slugify(this.profileName)},userName:function(){return this.profile.user.firstName+" "+this.profile.user.lastName},notSelectedAreas:function(){var t=this;return this.profile.geoReach?tt.filter((function(e){return-1===t.profile.geoReach.indexOf(e)})):tt},newMediaValidation:function(){return this.newMediaURL?-1!==this.newMediaURL.search("spotify")?Object.assign(ye.a.parse(this.newMediaURL),{provider:"spotify"}):ke.a.parse(this.newMediaURL):void 0},soundcloudValue:function(){if("soundcloud"===this.newMediaValidation.provider){var t=this.newMediaURL.split("src")[1].split('"')[1];return t}}},methods:{saveProfileName:function(t){this.profile.stageName=t,this.updateProfile()},saveProfileDescription:function(t){this.profile.description=t,this.updateProfile()},saveProfileContactDetails:function(t){this.profile.contactDetails=t,this.updateProfile()},addArea:function(t){this.profile.geoReach.push(t),this.profile.geoReach.sort(),this.updateProfile()},removeArea:function(t){this.profile.geoReach=this.profile.geoReach.filter((function(e){return e!==t})),this.profile.geoReach.sort(),this.updateProfile()},updateProfile:function(){var t=this;this.submitted=!0,this.$store.dispatch("profiles/update",this.profile).then((function(){t.validation={message:"Din profil uppdaterades",type:"success"},t.submitted=!1}),(function(e){t.validation={message:e,type:"error"},t.submitted=!1}))},updateImage:function(t,e){var a=this,i=this.$store.state.authentication.user;function r(t,r,o){var n=this,s=new XMLHttpRequest;s.open("PUT",r),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var t={id:a.profile.id,userId:i.id};"avatar"===e?t.avatarURL=o:"cover"===e?t.coverURL=o:console.error("missing target"),a.$store.dispatch("profiles/update",t).then((function(t){a.$store.commit("popLoading"),a.$store.commit("profiles/update",t),a.avatarFile=null,a.coverFile=null,a.validation={message:"Din profil uppdaterades",type:"success"}}),(function(t){a.$store.commit("popLoading"),a.validation={message:t,type:"error"}}))}else n.$store.commit("popLoading"),n.validation={message:"Något gick fel. Filen kunde inte laddas upp.",type:"error"},console.error("Could not upload file.")},s.send(t)}this.$store.commit("pushLoading"),this.removeImg(e).then((function(){var e=new XMLHttpRequest;e.open("GET","".concat(se.apiUrl,"/sign-s3?file-name=").concat(t.name,"&file-type=").concat(t.type)),e.setRequestHeader("Authorization",se.authHeader().Authorization),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var a=JSON.parse(e.responseText);r(t,a.signedRequest,a.url)}else console.error("Could not get signed URL.")},e.send()}))},removeImg:function(t){var e=this;return new Promise((function(a,i){""===e.profile["".concat(t,"URL")]&&(console.log("Ingen bild satt"),a());var r=e.profile["".concat(t,"URL")].split("/").pop(),o=new XMLHttpRequest;o.open("DELETE","".concat(se.apiUrl,"/sign-s3/").concat(r)),o.setRequestHeader("Authorization",se.authHeader().Authorization),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var r={id:e.profile.id,userId:e.$store.state.authentication.user.id};"avatar"===t?r.avatarURL="":"cover"===t?r.coverURL="":console.error("missing target"),e.$store.dispatch("profiles/update",r).then((function(t){e.$store.commit("profiles/update",t),e.validation={message:"Bilden raderad",type:"success"},a()}))}else e.validation={message:"Något gick fel",type:"error"},i()},o.send()}))},addNewMedia:function(){var t=this;if(!this.newMediaValidation)return!1;this.mediaValidationError=void 0,this.submitted=!0,this.$store.dispatch("media/add",{newMediaURL:this.soundcloudValue||this.newMediaURL,profileId:this.profile.id}).then((function(e){t.validation={target:"media",message:"Media tillagt",type:"success"},t.submitted=!1,t.newMediaURL="",t.$store.commit("profiles/addMedia",e)}),(function(e){t.validation={target:"media",message:e,type:"error"},t.mediaValidationError=e}))},deleteMedia:function(t){var e=this;this.$store.dispatch("media/remove",t).then((function(){e.$store.commit("profiles/deleteMedia",t)}),(function(t){console.log(t)}))}}},Me=Oe,Ee=(a("e46a"),a("cd55")),Ue=a("49e2"),Fe=a("c865"),je=a("0393"),De=a("23a7"),Be=a("8dd9"),ze=a("71a3"),He=a("c671"),Je=a("fe57"),qe=a("aac8"),Ge=Object(u["a"])(Me,be,we,!1,null,null,null),Ke=Ge.exports;f()(Ge,{VAlert:it["a"],VAvatar:x["a"],VBtn:B["a"],VCard:z["a"],VCardText:H["b"],VChip:rt["a"],VCol:ot["a"],VContainer:A["a"],VExpandTransition:nt["a"],VExpansionPanel:Ee["a"],VExpansionPanelContent:Ue["a"],VExpansionPanelHeader:Fe["a"],VExpansionPanels:je["a"],VFileInput:De["a"],VIcon:J["a"],VList:st["a"],VListItem:G["a"],VListItemGroup:lt["a"],VListItemTitle:Y["b"],VMenu:ct["a"],VParallax:dt["a"],VRow:ut["a"],VSheet:Be["a"],VSpacer:k["a"],VTab:ze["a"],VTabItem:He["a"],VTabs:Je["a"],VTabsItems:qe["a"],VTextField:pt["a"],VToolbar:ft["a"],VToolbarTitle:S["a"]}),i["a"].use(I["a"]);var Xe=[{path:"/",name:"Home",component:vt},{path:"/s/:search",name:"Home",component:vt},{path:"/login",name:"Login",component:Tt},{path:"/login/:status",name:"Time to Login",component:Tt},{path:"/forgot-password",name:"Forgot Password",component:It},{path:"/reset-password/:token",name:"Reset Password",component:jt},{path:"/register",name:"Register",component:Gt},{path:"/about",name:"Om singasong.nu",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/tos",name:"Användarvilkor",component:function(){return a.e("about").then(a.bind(null,"8002"))}},{path:"/account",name:"Account Details",component:Zt},{path:"/profile/:id",name:"Profile Redirect",component:ge},{path:"/profile/:id/edit",name:"Profile Edit",component:Ke},{path:"/profile/:id/:slug",name:"Profile",component:ge}],Ye=new I["a"]({mode:"history",routes:Xe});Ye.beforeEach((function(t,e,a){var i=-1!==t.path.search("account")||t.path.match(/profile\/[0-9]*\/edit/g),r=localStorage.getItem("user");if(i&&!r)return a("/login");a()}));var We,Qe=Ye,Ze=a("2f62"),ta=se.authHeader,ea=se.apiUrl,aa={login:ia,forgotPassword:oa,validateResetToken:na,resetPassword:sa,logout:la,register:ca,update:da,_delete:ua,getAll:pa};function ia(t,e){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})};return fetch("".concat(ea,"/users/authenticate"),a).then(fa).then((function(t){return t.jwtToken&&(localStorage.setItem("user",JSON.stringify(t)),ma()),t}))}function ra(){if("production"!==Object({NODE_ENV:"production",BASE_URL:"/"}))return console.log("Not in production, not using refresh token");var t={method:"POST"};return fetch("".concat(ea,"/users/refresh-token"),t).then(fa).then((function(t){return t.jwtToken&&(localStorage.setItem("user",JSON.stringify(t)),ma()),t}))}function oa(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})};return fetch("".concat(ea,"/users/forgot-password"),e).then(fa)}function na(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})};return fetch("".concat(ea,"/users/validate-reset-token"),e).then(fa)}function sa(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("".concat(ea,"/users/reset-password"),e).then(fa)}function la(){localStorage.removeItem("user"),va()}function ca(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("".concat(ea,"/users/register"),e).then(fa)}function da(t){var e={method:"PUT",headers:ta(),body:JSON.stringify(t)};return fetch("".concat(ea,"/users/").concat(t.id),e).then(fa).then((function(t){var e=JSON.parse(localStorage.getItem("user"));Object.assign(e,t),localStorage.setItem("user",JSON.stringify(e))}))}function ua(t){var e={method:"DELETE",headers:ta()};return fetch("".concat(ea,"/users/").concat(t),e).then(fa).then((function(){la(),location.href="/"}))}function pa(){var t={method:"GET",headers:ta()};return fetch("".concat(ea,"/users"),t).then(fa)}function fa(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(la(),location.href="/#/login/loggedOut");var i=a&&a.message||t.statusText;return Promise.reject(i)}return a}))}function ma(){var t=JSON.parse(localStorage.getItem("user")),e=JSON.parse(atob(t.jwtToken.split(".")[1])),a=new Date(1e3*e.exp),i=a.getTime()-Date.now()-6e4;We=setTimeout(ra,i)}function va(){clearTimeout(We)}ra();var ha=se.authHeader,ga=se.apiUrl,ba={getAll:wa,update:_a};function wa(){var t={method:"GET",headers:ha()};return fetch("".concat(ga,"/profiles"),t).then(ya)}function _a(t){var e={method:"PUT",headers:ha(),body:JSON.stringify(t)};return fetch("".concat(ga,"/profiles/").concat(t.id),e).then(ya)}function ya(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(aa.logout(),location.reload(!0));var i=a&&a.message||t.statusText;return Promise.reject(i)}return a}))}var xa=se.authHeader,ka=se.apiUrl,Sa={getAll:Ca,create:Va,update:La,remove:Ta};function Ca(){var t={method:"GET",headers:xa()};return fetch("".concat(ka,"/media"),t).then(Pa)}function Va(t){var e={method:"POST",headers:xa(),body:JSON.stringify(t)};return fetch("".concat(ka,"/media/"),e).then(Pa)}function La(t){var e={method:"PUT",headers:xa(),body:JSON.stringify(t)};return fetch("".concat(ka,"/media/").concat(t.id),e).then(Pa)}function Ta(t){var e={method:"DELETE",headers:xa(),body:JSON.stringify(t)};return fetch("".concat(ka,"/media/").concat(t.id),e).then(Pa)}function Pa(t){return t.text().then((function(e){var a=e&&JSON.parse(e);if(!t.ok){401===t.status&&(aa.logout(),location.reload(!0));var i=a&&a.message||t.statusText;return Promise.reject(i)}return a}))}var Aa={userService:aa,profileService:ba,mediaService:Sa},Na=JSON.parse(localStorage.getItem("user")),Ra=Na?{status:{loggedIn:!0},user:Na}:{status:{},user:null},$a={namespaced:!0,state:Ra,actions:{login:function(t,e){var a=t.commit,i=t.rootState,r=e.email,o=e.password;return new Promise((function(t,e){a("loginRequest",{email:r}),i.loading.push(1),Aa.userService.login(r,o).then((function(e){i.loading.pop(),a("loginSuccess",e),t(e)}),(function(t){i.loading.pop(),a("loginFailure",t),e(t)}))}))},forgotPassword:function(t,e){var a=t.rootState,i=e.email;return new Promise((function(t,e){a.loading.push(1),Aa.userService.forgotPassword(i).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),e(t)}))}))},validateResetToken:function(t,e){var a=t.rootState,i=e.token;return new Promise((function(t,e){a.loading.push(1),Aa.userService.validateResetToken(i).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),e(t)}))}))},resetPassword:function(t,e){var a=t.rootState;return new Promise((function(t,i){a.loading.push(1),Aa.userService.resetPassword(e).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),i(t)}))}))},logout:function(t){var e=t.commit;Aa.userService.logout(),e("logout")},register:function(t,e){var a=t.rootState;return new Promise((function(t,i){a.loading.push(1),Aa.userService.register(e).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),console.error({error:t}),i(t)}))}))},update:function(t,e){var a=t.rootState;return new Promise((function(t,i){a.loading.push(1),Aa.userService.update(e).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),console.error({error:t}),i(t)}))}))},_delete:function(t,e){var a=t.dispatch;Aa.userService._delete(e).then((function(){a("authentication/logout")}),(function(t){console.error({error:t})}))}},mutations:{loginRequest:function(t,e){t.status={loggingIn:!0},t.user=e},loginSuccess:function(t,e){t.status={loggedIn:!0},t.user=e},loginFailure:function(t){t.status={},t.user=null},logout:function(t){t.status={},t.user=null}}},Ia={namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit,a=t.rootState;e("getAllRequest"),a.loading.push(1),Aa.userService.getAll().then((function(t){a.loading.pop(),e("getAllSuccess",t)}),(function(t){a.loading.pop(),e("getAllFailure",t)}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}}}},Oa=(a("c740"),a("a434"),{namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit,a=t.rootState;e("getAllRequest"),a.loading.push(1),Aa.profileService.getAll().then((function(t){a.loading.pop(),e("getAllSuccess",t)}),(function(t){a.loading.pop(),e("getAllFailure",t)}))},update:function(t,e){var a=t.rootState;return new Promise((function(t,i){a.loading.push(1),Aa.profileService.update(e).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),console.error({error:t}),i(t)}))}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}},addMedia:function(t,e){t.all.items.find((function(t){return t.id===e.profileId})).media.unshift(e)},update:function(t,e){var a=t.all.items.findIndex((function(t){return t.id===e.id}));t.all.items.splice(a,1,e)},deleteMedia:function(t,e){var a=t.all.items.find((function(t){return t.id===e.profileId})),i=a.media.findIndex((function(t){return t.id===e.id}));a.media.splice(i,1)}}}),Ma={namespaced:!0,state:{all:{}},actions:{getAll:function(t){var e=t.commit,a=t.rootState;e("getAllRequest"),a.loading.push(1),Aa.mediaService.getAll().then((function(t){a.loading.pop(),e("getAllSuccess",t)}),(function(t){a.loading.pop(),e("getAllFailure",t)}))},add:function(t,e){var a=t.rootState,i=e.newMediaURL,r=e.profileId,o={};return-1!==i.search("spotify")?o=Object.assign(ye.a.parse(i),{provider:"spotify",url:i}):-1!==i.search("soundcloud")?o={type:"sc",id:i,provider:"soundcloud",url:i}:(o=Object.assign(ke.a.parse(i),{url:i}),o.type=o.mediaType),o.value=o.id,o.profileId=r,new Promise((function(t,e){a.loading.push(1),Aa.mediaService.create(o).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),console.error({error:t}),e(t)}))}))},update:function(t,e){var a=t.rootState;return new Promise((function(t,i){a.loading.push(1),Aa.mediaService.update(e).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),console.error({error:t}),i(t)}))}))},remove:function(t,e){var a=t.rootState;return new Promise((function(t,i){a.loading.push(1),Aa.mediaService.remove(e).then((function(e){a.loading.pop(),t(e)}),(function(t){a.loading.pop(),console.error({error:t}),i(t)}))}))}},mutations:{getAllRequest:function(t){t.all={loading:!0}},getAllSuccess:function(t,e){t.all={items:e}},getAllFailure:function(t,e){t.all={error:e}}}};i["a"].use(Ze["a"]);var Ea=new Ze["a"].Store({modules:{authentication:$a,users:Ia,profiles:Oa,media:Ma},state:{loading:[]},mutations:{pushLoading:function(t){t.loading.push(1)},popLoading:function(t){t.loading.length&&t.loading.pop(1)}}}),Ua=a("f309"),Fa=a("c1f1"),ja=a("fcf4");i["a"].use(Ua["a"]);var Da=new Ua["a"]({lang:{locales:{sv:Fa["a"]},current:"sv"},theme:{options:{customProperties:!0},themes:{light:{primary:ja["a"].deepPurple.darken1,secondary:ja["a"].deepOrange.lighten5,accent:ja["a"].deepOrange.base,error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});function Ba(t){var e=t.$options.title;if(e)return"function"===typeof e?e.call(t):e}var za={created:function(){var t=Ba(this);t&&(document.title=t)}},Ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.$store.state.authentication.status.loggedIn?a("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),i),[a("v-icon",[t._v("mdi-account")])],1)]}}],null,!1,1415903684)},[a("v-list",[a("v-list-item",{attrs:{to:"/profile/"+t.profileId+"/edit"}},[a("v-list-item-title",[t._v(" Redigera din profil ")])],1),a("v-list-item",{attrs:{to:"/account"}},[a("v-list-item-title",[t._v(" Ditt konto ")])],1),a("v-list-item",{attrs:{to:"/login"}},[a("v-list-item-title",[t._v(" Logga ut "+t._s(t.$store.state.authentication.user.firstName)+" ")])],1)],1)],1):[t.$vuetify.breakpoint.xs?a("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),i),[a("v-icon",[t._v("mdi-menu")])],1)]}}],null,!1,2322017526)},[a("v-list",[a("v-list-item",{attrs:{to:"/login"}},[a("v-list-item-title",[t._v(" Logga in ")])],1),a("v-list-item",{attrs:{to:"/register"}},[a("v-list-item-title",[t._v(" Skapa konto ")])],1)],1)],1):[a("v-btn",{attrs:{plain:"",to:"/login"}},[t._v("Logga in")]),a("v-btn",{attrs:{outlined:"",to:"/register"}},[t._v("Skapa konto")])]]],2)},Ja=[],qa={computed:{profile:function(){var t=this.$store.state.authentication.user.id;return this.$store.state.profiles.all.items?this.$store.state.profiles.all.items.find((function(e){return e.userId===t})):void 0},profileId:function(){return this.profile?this.profile.id:void 0}}},Ga=qa,Ka=Object(u["a"])(Ga,Ha,Ja,!1,null,"7135de1e",null),Xa=Ka.exports;f()(Ka,{VBtn:B["a"],VIcon:J["a"],VList:st["a"],VListItem:G["a"],VListItemTitle:Y["b"],VMenu:ct["a"]}),i["a"].mixin(za),i["a"].use(r["a"]),i["a"].component("TopNavigation",Xa),i["a"].config.productionTip=!1,new i["a"]({router:Qe,store:Ea,vuetify:Da,render:function(t){return t($)}}).$mount("#app")},"5ccf":function(t,e,a){},6102:function(t,e,a){},"7e33":function(t,e,a){t.exports=a.p+"img/frontpage-hero.2d9fe1ed.jpg"},"7f58":function(t,e,a){},"889a":function(t,e,a){},"90c7":function(t,e,a){"use strict";a("32a5")},acbd:function(t,e,a){"use strict";a("7f58")},d3d5:function(t,e,a){"use strict";a("55cb")},e46a:function(t,e,a){"use strict";a("889a")}});
//# sourceMappingURL=app.6bde0097.js.map